<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="Sen">
	<datamodel>
		<data expr="0" id="shift" />
		<data expr="0" id="energyChange" />
		<data expr="" id="buttonPressed" />
	</datamodel>
	<state id="main_region">
		<initial>
			<transition target="Example" type="internal">
			</transition>
		</initial>
		<state id="Example">
			<onentry>
				<script>
					setMsg('You are at home.');
				</script>
			</onentry>
			<initial>
				<transition target="atHome" type="internal">
				</transition>
			</initial>
			<state id="atHome">
				<onentry>
					 <assign location="energyChange" expr="getEnergy(); &gt; 100 ? -(100 - getEnergy();) : 0"/>
					<script>
						increaseEnergy(energyChange);
					</script>
					<script>
						setMsg('At home');
					</script>
				</onentry>
				<transition event="employee.goToWork"  target="atWork">
				</transition>
			</state>
			<state id="atWork">
				<onentry>
					<script>
						setMsg('At work.');
					</script>
					<script>
						pushMsg();
					</script>
					<script>
						shiftsShow();
					</script>
				</onentry>
				<initial>
					<transition target="startShift" type="internal">
					</transition>
				</initial>
				<state id="startShift">
					<onentry>
						<send event="startShift_t_0_timeEvent_0" delay="0s"/>
					</onentry>
					<onexit>
						<cancel sendid="startShift_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						 <assign location="shift" expr="getRandomInteger(3);"/>
						<script>
							shiftHighlightAssigned(shift);
						</script>
					</onentry>
					<transition event="startShift_t_0_timeEvent_0"  target="GracePeriod">
					</transition>
				</state>
				<state id="Assembly">
					<onentry>
						<send event="Assembly_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="Assembly_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							shiftHighlightActive(1);
						</script>
						<script>
							setMsg('Assembling ');
						</script>
						<script>
							pushMsg();
						</script>
					</onentry>
					<initial>
						<transition target="Working" type="internal">
						</transition>
					</initial>
					<state id="Working">
						<onentry>
							<send event="Working_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="Working_t_0_timeEvent_0" />
						</onexit>
						<initial>
							<transition target="Working.entry_0" type="internal">
							</transition>
						</initial>
						<state id="Q9jd2zy5lG">
							<onentry>
								<send event="Q9jd2zy5lG_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Q9jd2zy5lG_t_1_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="Assemble">
							</transition>
							<transition event="Q9jd2zy5lG_t_1_timeEvent_0" cond="buttonPressed == 'Assemble' &amp;&amp; getMaterial(); &gt; 0" target="Assemble">
								<script>
									increaseMaterial(-1);
								</script>
								<script>
									increaseFinished(1);
								</script>
							</transition>
						</state>
						<state id="Assemble">
							<onentry>
								<script>
									setActions('Assemble');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Q9jd2zy5lG">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<history type = "shallow" id="Working.entry_0">
							<transition target="Working.entry_0">
							</transition>
						</history>
						<transition event="Working_t_0_timeEvent_0"  target="Working.entry_0">
							<script>
								increaseEnergy(-2);
							</script>
						</transition>
					</state>
					<transition event="Assembly_t_0_timeEvent_0"  target="startShift">
						<script>
							increasePay(10);
						</script>
						<script>
							setActions('');
						</script>
						<script>
							popMsg();
						</script>
					</transition>
				</state>
				<state id="GracePeriod">
					<onentry>
						<send event="GracePeriod_t_0_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="GracePeriod_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="GracePeriod_t_1_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="GracePeriod_t_1_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="GracePeriod_t_3_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="GracePeriod_t_3_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="GracePeriod_t_4_timeEvent_0" delay="0s"/>
					</onentry>
					<onexit>
						<cancel sendid="GracePeriod_t_4_timeEvent_0" />
					</onexit>
					<initial>
						<transition target="w09BLpXVHb" type="internal">
						</transition>
					</initial>
					<state id="w09BLpXVHb">
						<onentry>
							<script>
								shiftHighlightAssigned(shift);
							</script>
						</onentry>
						<transition event="employee.shiftClicked"  target="w09BLpXVHb">
							 <assign location="shift" expr="_event.data"/>
						</transition>
					</state>
					<transition event="GracePeriod_t_0_timeEvent_0" cond="shift == 0" target="AtStock">
						<script>
							increaseEnergy(-2);
						</script>
					</transition>
					<transition event="GracePeriod_t_1_timeEvent_0" cond="shift == 1" target="Assemble">
						<script>
							increaseEnergy(-2);
						</script>
					</transition>
					<transition event="employee.goHome"  target="atHome">
						<script>
							shiftsHide();
						</script>
						<script>
							increaseEnergy(50);
						</script>
					</transition>
					<transition event="GracePeriod_t_3_timeEvent_0" cond="shift == 2" target="AtStock">
						<script>
							increaseEnergy(-2);
						</script>
					</transition>
					<transition event="GracePeriod_t_4_timeEvent_0" cond="getEnergy(); &lt;= 25" target="atHome">
						<script>
							shiftsHide();
						</script>
						<script>
							increaseEnergy(50);
						</script>
					</transition>
				</state>
				<state id="ozTCHswJqQ">
					<onentry>
						<send event="ozTCHswJqQ_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="ozTCHswJqQ_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							setMsg('Unloading');
						</script>
						<script>
							pushMsg();
						</script>
					</onentry>
					<initial>
						<transition target="Working" type="internal">
						</transition>
					</initial>
					<state id="Working">
						<onentry>
							<send event="Working_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="Working_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<script>
								shiftHighlightActive(0);
							</script>
						</onentry>
						<initial>
							<transition target="Working.entry_0" type="internal">
							</transition>
						</initial>
						<state id="AtStock">
							<onentry>
								<script>
									setActions('Walk,Toilet Break');
								</script>
								<script>
									setMsg('At stock');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="oEuE9ArHtt">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="BfY4J0nWy3">
							<onentry>
								<script>
									setActions('Walk,Pick up');
								</script>
								<script>
									setMsg('At truck');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Pressed1">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="AtTruckCarrying">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At truck carrying');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="zkH1UD3pnF">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="AtStockCarrying">
							<onentry>
								<script>
									setActions('Walk,Drop');
								</script>
								<script>
									setMsg('At stock carrying');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Pressed5">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="oEuE9ArHtt">
							<onentry>
								<send event="oEuE9ArHtt_t_0_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="oEuE9ArHtt_t_0_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="oEuE9ArHtt_t_2_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="oEuE9ArHtt_t_2_timeEvent_0" />
							</onexit>
							<transition event="oEuE9ArHtt_t_0_timeEvent_0" cond="buttonPressed == 'Walk'" target="BfY4J0nWy3">
							</transition>
							<transition event="ui.actionReleased"  target="AtStock">
							</transition>
							<transition event="oEuE9ArHtt_t_2_timeEvent_0" cond="buttonPressed == 'Toilet Break'" target="Z2FvJhUTga">
							</transition>
						</state>
						<state id="Pressed1">
							<onentry>
								<send event="Pressed1_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed1_t_1_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="Pressed1_t_2_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed1_t_2_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="BfY4J0nWy3">
							</transition>
							<transition event="Pressed1_t_1_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtStock">
							</transition>
							<transition event="Pressed1_t_2_timeEvent_0" cond="buttonPressed == 'Pick up'" target="AtTruckCarrying">
							</transition>
						</state>
						<state id="zkH1UD3pnF">
							<onentry>
								<send event="zkH1UD3pnF_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="zkH1UD3pnF_t_1_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="AtTruckCarrying">
							</transition>
							<transition event="zkH1UD3pnF_t_1_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtStockCarrying">
							</transition>
						</state>
						<state id="Pressed5">
							<onentry>
								<send event="Pressed5_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed5_t_1_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="Pressed5_t_2_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed5_t_2_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="AtStockCarrying">
							</transition>
							<transition event="Pressed5_t_1_timeEvent_0" cond="buttonPressed == 'Drop'" target="AtStock">
								<script>
									increaseMaterial(1);
								</script>
							</transition>
							<transition event="Pressed5_t_2_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtTruckCarrying">
							</transition>
						</state>
						<history type = "shallow" id="Working.entry_0">
							<transition target="Working.entry_0">
							</transition>
						</history>
						<transition event="Working_t_0_timeEvent_0"  target="Working.entry_0">
							<script>
								increaseEnergy(-2);
							</script>
						</transition>
					</state>
					<state id="Z2FvJhUTga">
						<onentry>
							<script>
								setActions('Done');
							</script>
							<script>
								setMsg('At toilet');
							</script>
						</onentry>
						<transition event="ui.actionPressed"  target="Pressed3">
							 <assign location="buttonPressed" expr="_event.data"/>
						</transition>
					</state>
					<state id="Pressed3">
						<onentry>
							<send event="Pressed3_t_1_timeEvent_0" delay="500ms"/>
						</onentry>
						<onexit>
							<cancel sendid="Pressed3_t_1_timeEvent_0" />
						</onexit>
						<transition event="ui.actionReleased"  target="Z2FvJhUTga">
						</transition>
						<transition event="Pressed3_t_1_timeEvent_0" cond="buttonPressed == 'Done'" target="AtStock">
						</transition>
					</state>
					<transition event="ozTCHswJqQ_t_0_timeEvent_0"  target="startShift">
						<script>
							increasePay(10);
						</script>
						<script>
							setActions('');
						</script>
						<script>
							popMsg();
						</script>
						<script>
							popMsg();
						</script>
					</transition>
				</state>
				<state id="Load">
					<onentry>
						<send event="Load_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="Load_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							setMsg('Loading');
						</script>
						<script>
							pushMsg();
						</script>
					</onentry>
					<initial>
						<transition target="Working" type="internal">
						</transition>
					</initial>
					<state id="Working">
						<onentry>
							<send event="Working_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="Working_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<script>
								shiftHighlightActive(0);
							</script>
						</onentry>
						<initial>
							<transition target="Working.entry_0" type="internal">
							</transition>
						</initial>
						<state id="AtStock">
							<onentry>
								<script>
									setActions('Walk,Toilet Break,Pick up');
								</script>
								<script>
									setMsg('At stock');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="RDtW6Tfst2">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="AtTruck">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At truck');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Pressed1">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="AtTruckCarrying">
							<onentry>
								<script>
									setActions('Walk,Drop');
								</script>
								<script>
									setMsg('At truck carrying');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Pressed4">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="AtStockCarrying">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At stock carrying');
								</script>
							</onentry>
							<transition event="ui.actionPressed"  target="Pressed5">
								 <assign location="buttonPressed" expr="_event.data"/>
							</transition>
						</state>
						<state id="RDtW6Tfst2">
							<onentry>
								<send event="RDtW6Tfst2_t_0_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="RDtW6Tfst2_t_0_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="RDtW6Tfst2_t_2_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="RDtW6Tfst2_t_2_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="RDtW6Tfst2_t_3_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="RDtW6Tfst2_t_3_timeEvent_0" />
							</onexit>
							<transition event="RDtW6Tfst2_t_0_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtTruck">
							</transition>
							<transition event="ui.actionReleased"  target="AtStock">
							</transition>
							<transition event="RDtW6Tfst2_t_2_timeEvent_0" cond="buttonPressed == 'Toilet Break'" target="toilet">
							</transition>
							<transition event="RDtW6Tfst2_t_3_timeEvent_0" cond="buttonPressed == 'Pick up'" target="AtStockCarrying">
							</transition>
						</state>
						<state id="Pressed1">
							<onentry>
								<send event="Pressed1_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed1_t_1_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="AtTruck">
							</transition>
							<transition event="Pressed1_t_1_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtStock">
							</transition>
						</state>
						<state id="Pressed4">
							<onentry>
								<send event="Pressed4_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed4_t_1_timeEvent_0" />
							</onexit>
							<onentry>
								<send event="Pressed4_t_2_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed4_t_2_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="AtTruckCarrying">
							</transition>
							<transition event="Pressed4_t_1_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtStockCarrying">
							</transition>
							<transition event="Pressed4_t_2_timeEvent_0" cond="buttonPressed == 'Drop'" target="AtTruck">
								<script>
									increaseFinished(-1);
								</script>
							</transition>
						</state>
						<state id="Pressed5">
							<onentry>
								<send event="Pressed5_t_1_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="Pressed5_t_1_timeEvent_0" />
							</onexit>
							<transition event="ui.actionReleased"  target="AtStockCarrying">
							</transition>
							<transition event="Pressed5_t_1_timeEvent_0" cond="buttonPressed == 'Walk'" target="AtTruckCarrying">
							</transition>
						</state>
						<history type = "shallow" id="Working.entry_0">
							<transition target="Working.entry_0">
							</transition>
						</history>
						<transition event="Working_t_0_timeEvent_0"  target="Working.entry_0">
							<script>
								increaseEnergy(-2);
							</script>
						</transition>
					</state>
					<state id="toilet">
						<onentry>
							<script>
								setActions('Done');
							</script>
							<script>
								setMsg('At toilet');
							</script>
						</onentry>
						<transition event="ui.actionPressed"  target="Pressed3">
							 <assign location="buttonPressed" expr="_event.data"/>
						</transition>
					</state>
					<state id="Pressed3">
						<onentry>
							<send event="Pressed3_t_1_timeEvent_0" delay="500ms"/>
						</onentry>
						<onexit>
							<cancel sendid="Pressed3_t_1_timeEvent_0" />
						</onexit>
						<transition event="ui.actionReleased"  target="toilet">
						</transition>
						<transition event="Pressed3_t_1_timeEvent_0" cond="buttonPressed == 'Done'" target="AtStock">
						</transition>
					</state>
					<transition event="Load_t_0_timeEvent_0"  target="startShift">
						<script>
							increasePay(10);
						</script>
						<script>
							setActions('');
						</script>
						<script>
							popMsg();
						</script>
						<script>
							popMsg();
						</script>
					</transition>
				</state>
			</state>
		</state>
	</state>
</scxml>
