<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="Pau">
	<datamodel>
		<data expr="0" id="numb" />
		<data expr="false" id="atToilet" />
		<data expr="" id="txt" />
	</datamodel>
	<state id="main_region">
		<initial>
			<transition target="AtHome" type="internal">
			<script>
				setMsg('At home');
			</script>
			</transition>
		</initial>
		<state id="wQwDAd5UiA">
			<onentry>
				<script>
					setMsg('At Work:');
				</script>
				<script>
					pushMsg();
				</script>
			</onentry>
			<initial>
				<transition target="RVoAwL0zZB" type="internal">
				</transition>
			</initial>
			<parallel id="Jj0bRX4oeX">
				<onentry>
					<send event="Jj0bRX4oeX_t_0_timeEvent_0" delay="10s"/>
				</onentry>
				<onexit>
					<cancel sendid="Jj0bRX4oeX_t_0_timeEvent_0" />
				</onexit>
				<onentry>
					<script>
						shiftHighlightActive(numb);
					</script>
					 <assign location="atToilet" expr="false"/>
					<script>
						setMsg('Working shift');
					</script>
					<script>
						pushMsg();
					</script>
				</onentry>
				<state id="jq7zVYQTKC">
					<initial>
						<transition target="ki6knuvXjk" type="internal">
						</transition>
					</initial>
					<state id="ki6knuvXjk">
						<onentry>
							<send event="ki6knuvXjk_t_0_timeEvent_0" delay="0ms"/>
						</onentry>
						<onexit>
							<cancel sendid="ki6knuvXjk_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<send event="ki6knuvXjk_t_1_timeEvent_0" delay="0ms"/>
						</onentry>
						<onexit>
							<cancel sendid="ki6knuvXjk_t_1_timeEvent_0" />
						</onexit>
						<transition event="ki6knuvXjk_t_0_timeEvent_0" cond="numb == 0 || numb == 2" target="t6I42PCaWE">
						</transition>
						<transition event="ki6knuvXjk_t_1_timeEvent_0" cond="numb == 1" target="JyeliLjklQ">
						</transition>
					</state>
					<parallel id="t6I42PCaWE">
						<state id="Ydh8zJ8Uu4">
							<initial>
								<transition target="LMT7tEslkL" type="internal">
								</transition>
							</initial>
							<state id="nmWPPFiODC">
								<initial>
									<transition target="E2KrKzyeWp" type="internal">
									</transition>
								</initial>
								<state id="case_unload">
									<onentry>
										<script>
											setActions('Walk,Pickup');
										</script>
										<script>
											setMsg('At Truck');
										</script>
									</onentry>
									<transition event="pickup"  target="tkknkY0X5n">
									</transition>
								</state>
								<state id="ujj07IdP4O">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At Truck');
										</script>
									</onentry>
								</state>
								<state id="E2KrKzyeWp">
									<onentry>
										<send event="E2KrKzyeWp_t_0_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="E2KrKzyeWp_t_0_timeEvent_0" />
									</onexit>
									<onentry>
										<send event="E2KrKzyeWp_t_1_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="E2KrKzyeWp_t_1_timeEvent_0" />
									</onexit>
									<transition event="E2KrKzyeWp_t_0_timeEvent_0" cond="numb == 0" target="case_unload">
									</transition>
									<transition event="E2KrKzyeWp_t_1_timeEvent_0" cond="numb == 2" target="ujj07IdP4O">
									</transition>
								</state>
								<transition event="walk"  target="LMT7tEslkL">
								</transition>
							</state>
							<state id="AuzPfYfUyt">
								<initial>
									<transition target="r08hNKFLFg" type="internal">
									</transition>
								</initial>
								<state id="tkknkY0X5n">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At truck, carrying material.');
										</script>
									</onentry>
								</state>
								<state id="case_load">
									<onentry>
										<script>
											setActions('Walk,Drop');
										</script>
										<script>
											setMsg('At truck, carrying finished product.');
										</script>
									</onentry>
									<transition event="drop"  target="ujj07IdP4O">
										<script>
											increaseFinished(-1);
										</script>
									</transition>
								</state>
								<state id="r08hNKFLFg">
									<onentry>
										<send event="r08hNKFLFg_t_0_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="r08hNKFLFg_t_0_timeEvent_0" />
									</onexit>
									<onentry>
										<send event="r08hNKFLFg_t_1_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="r08hNKFLFg_t_1_timeEvent_0" />
									</onexit>
									<transition event="r08hNKFLFg_t_0_timeEvent_0" cond="numb == 2" target="case_load">
									</transition>
									<transition event="r08hNKFLFg_t_1_timeEvent_0" cond="numb == 0" target="tkknkY0X5n">
									</transition>
								</state>
								<transition event="walk"  target="s0NSwRb73F">
								</transition>
							</state>
							<state id="LMT7tEslkL">
								<initial>
									<transition target="zvr9JNFiqR" type="internal">
									</transition>
								</initial>
								<state id="RmmtK0Mq8p">
									<onentry>
										<script>
											setActions('Walk,Toilet break');
										</script>
										<script>
											setMsg('At stock');
										</script>
									</onentry>
								</state>
								<state id="fiFkOxp0uF">
									<onentry>
										<script>
											setActions('Walk,Toilet break,Pickup');
										</script>
										<script>
											setMsg('At stock');
										</script>
									</onentry>
									<transition event="pickup"  target="rBH8P3oDUM">
									</transition>
								</state>
								<state id="zvr9JNFiqR">
									<onentry>
										<send event="zvr9JNFiqR_t_0_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="zvr9JNFiqR_t_0_timeEvent_0" />
									</onexit>
									<onentry>
										<send event="zvr9JNFiqR_t_1_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="zvr9JNFiqR_t_1_timeEvent_0" />
									</onexit>
									<transition event="zvr9JNFiqR_t_0_timeEvent_0" cond="numb == 2" target="fiFkOxp0uF">
									</transition>
									<transition event="zvr9JNFiqR_t_1_timeEvent_0" cond="numb == 0" target="RmmtK0Mq8p">
									</transition>
								</state>
								<transition event="walk"  target="nmWPPFiODC">
								</transition>
								<transition event="toilet"  target="ECAPm6Dy3Y">
								</transition>
							</state>
							<state id="s0NSwRb73F">
								<initial>
									<transition target="B46gBqB5DI" type="internal">
									</transition>
								</initial>
								<state id="FyKorz2Gny">
									<onentry>
										<script>
											setActions('Walk,Drop');
										</script>
										<script>
											setMsg('At stock, carrying material.');
										</script>
									</onentry>
									<transition event="drop"  target="RmmtK0Mq8p">
										<script>
											increaseMaterial(1);
										</script>
									</transition>
								</state>
								<state id="rBH8P3oDUM">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At stock, carrying finished product.');
										</script>
									</onentry>
								</state>
								<state id="B46gBqB5DI">
									<onentry>
										<send event="B46gBqB5DI_t_0_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="B46gBqB5DI_t_0_timeEvent_0" />
									</onexit>
									<onentry>
										<send event="B46gBqB5DI_t_1_timeEvent_0" delay="0ms"/>
									</onentry>
									<onexit>
										<cancel sendid="B46gBqB5DI_t_1_timeEvent_0" />
									</onexit>
									<transition event="B46gBqB5DI_t_0_timeEvent_0" cond="numb == 2" target="rBH8P3oDUM">
									</transition>
									<transition event="B46gBqB5DI_t_1_timeEvent_0" cond="numb == 0" target="FyKorz2Gny">
									</transition>
								</state>
								<transition event="walk"  target="AuzPfYfUyt">
								</transition>
							</state>
							<state id="ECAPm6Dy3Y">
								<onentry>
									<script>
										setActions('');
									</script>
									<script>
										setActions('Done');
									</script>
									 <assign location="atToilet" expr="true"/>
									<script>
										setMsg('At toilet.');
									</script>
								</onentry>
								<transition event="done"  target="LMT7tEslkL">
									 <assign location="atToilet" expr="false"/>
								</transition>
							</state>
						</state>
						<state id="r5rZbfrogD">
							<initial>
								<transition target="oci0uv2wJi" type="internal">
								</transition>
							</initial>
							<parallel id="oci0uv2wJi">
								<state id="mTRR7oZLKP">
									<initial>
										<transition target="mPbU5FKLEl" type="internal">
										</transition>
									</initial>
									<state id="mPbU5FKLEl">
										<transition event="ui.actionPressed" cond="_event.data == 'Walk'" target="gQA0APtN8H">
										</transition>
									</state>
									<state id="gQA0APtN8H">
										<onentry>
											<send event="gQA0APtN8H_t_1_timeEvent_0" delay="500ms"/>
										</onentry>
										<onexit>
											<cancel sendid="gQA0APtN8H_t_1_timeEvent_0" />
										</onexit>
										<transition event="ui.actionReleased" cond="_event.data == 'Walk'" target="mPbU5FKLEl">
										</transition>
										<transition event="gQA0APtN8H_t_1_timeEvent_0"  target="mPbU5FKLEl">
											<send event="walk">
											</send>
										</transition>
									</state>
								</state>
								<state id="vFlxtXgSX3">
									<initial>
										<transition target="YRxZlhasdV" type="internal">
										</transition>
									</initial>
									<state id="YRxZlhasdV">
										<transition event="ui.actionPressed" cond="_event.data == 'Pickup'" target="Z7iACR4QYe">
										</transition>
									</state>
									<state id="Z7iACR4QYe">
										<onentry>
											<send event="Z7iACR4QYe_t_1_timeEvent_0" delay="500ms"/>
										</onentry>
										<onexit>
											<cancel sendid="Z7iACR4QYe_t_1_timeEvent_0" />
										</onexit>
										<transition event="ui.actionReleased" cond="_event.data == 'Pickup'" target="YRxZlhasdV">
										</transition>
										<transition event="Z7iACR4QYe_t_1_timeEvent_0"  target="YRxZlhasdV">
											<send event="pickup">
											</send>
										</transition>
									</state>
								</state>
								<state id="Drop">
									<initial>
										<transition target="QYHH7fpKfE" type="internal">
										</transition>
									</initial>
									<state id="PPtsNHyNWP">
										<onentry>
											<send event="PPtsNHyNWP_t_1_timeEvent_0" delay="500ms"/>
										</onentry>
										<onexit>
											<cancel sendid="PPtsNHyNWP_t_1_timeEvent_0" />
										</onexit>
										<transition event="ui.actionReleased" cond="_event.data == 'Drop'" target="QYHH7fpKfE">
										</transition>
										<transition event="PPtsNHyNWP_t_1_timeEvent_0"  target="QYHH7fpKfE">
											<send event="drop">
											</send>
										</transition>
									</state>
									<state id="QYHH7fpKfE">
										<transition event="ui.actionPressed" cond="_event.data == 'Drop'" target="PPtsNHyNWP">
										</transition>
									</state>
								</state>
								<state id="FT8zKwDl5o">
									<initial>
										<transition target="YnGaGp7gNT" type="internal">
										</transition>
									</initial>
									<state id="f2FHaAjs0Y">
										<onentry>
											<send event="f2FHaAjs0Y_t_1_timeEvent_0" delay="500ms"/>
										</onentry>
										<onexit>
											<cancel sendid="f2FHaAjs0Y_t_1_timeEvent_0" />
										</onexit>
										<transition event="ui.actionReleased" cond="_event.data == 'Done'" target="YnGaGp7gNT">
										</transition>
										<transition event="f2FHaAjs0Y_t_1_timeEvent_0"  target="YnGaGp7gNT">
											<send event="done">
											</send>
										</transition>
									</state>
									<state id="YnGaGp7gNT">
										<onentry>
											<send event="YnGaGp7gNT_t_0_timeEvent_0" delay="10ms"/>
										</onentry>
										<onexit>
											<cancel sendid="YnGaGp7gNT_t_0_timeEvent_0" />
										</onexit>
										<transition event="YnGaGp7gNT_t_0_timeEvent_0" cond="_event.data == 'Done'" target="f2FHaAjs0Y">
										</transition>
										<transition event="ui.actionPressed" cond="_event.data == 'Done'" target="f2FHaAjs0Y">
										</transition>
									</state>
								</state>
								<state id="TfGWO8V2fA">
									<initial>
										<transition target="VTb6fY4vpM" type="internal">
										</transition>
									</initial>
									<state id="BoQ8xncj8I">
										<onentry>
											<send event="BoQ8xncj8I_t_1_timeEvent_0" delay="500ms"/>
										</onentry>
										<onexit>
											<cancel sendid="BoQ8xncj8I_t_1_timeEvent_0" />
										</onexit>
										<transition event="ui.actionReleased" cond="_event.data == 'Toilet break'" target="VTb6fY4vpM">
										</transition>
										<transition event="BoQ8xncj8I_t_1_timeEvent_0"  target="VTb6fY4vpM">
											<send event="toilet">
											</send>
										</transition>
									</state>
									<state id="VTb6fY4vpM">
										<transition event="ui.actionPressed" cond="_event.data == 'Toilet break'" target="BoQ8xncj8I">
										</transition>
									</state>
								</state>
							</parallel>
						</state>
					</parallel>
					<state id="JyeliLjklQ">
						<onentry>
							<script>
								setActions('Assemble');
							</script>
							 <assign location="txt" expr="getMaterial(); &gt; 0 ? 'You can assemble' : 'Not enough materials left'"/>
							<script>
								setMsg(txt);
							</script>
						</onentry>
						<transition event="assemble" cond="getMaterial(); &gt; 0" target="JyeliLjklQ">
							<script>
								increaseMaterial(-1);
							</script>
							<script>
								increaseFinished(1);
							</script>
						</transition>
					</state>
				</state>
				<state id="EnergyTimer">
					<initial>
						<transition target="energy" type="internal">
						</transition>
					</initial>
					<state id="energy">
						<onentry>
							<send event="energy_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="energy_t_0_timeEvent_0" />
						</onexit>
						<transition event="energy_t_0_timeEvent_0" cond="atToilet == false" target="energy">
							<script>
								increaseEnergy(-2);
							</script>
						</transition>
					</state>
				</state>
				<state id="kLR1wWMwhe">
					<initial>
						<transition target="qI9e56xK6V" type="internal">
						</transition>
					</initial>
					<state id="VqwaQSwwWq">
						<onentry>
							<send event="VqwaQSwwWq_t_1_timeEvent_0" delay="500ms"/>
						</onentry>
						<onexit>
							<cancel sendid="VqwaQSwwWq_t_1_timeEvent_0" />
						</onexit>
						<transition event="ui.actionReleased" cond="_event.data == 'Assemble'" target="qI9e56xK6V">
						</transition>
						<transition event="VqwaQSwwWq_t_1_timeEvent_0"  target="qI9e56xK6V">
							<send event="assemble">
							</send>
						</transition>
					</state>
					<state id="qI9e56xK6V">
						<transition event="ui.actionPressed" cond="_event.data == 'Assemble'" target="VqwaQSwwWq">
						</transition>
					</state>
				</state>
				<transition event="Jj0bRX4oeX_t_0_timeEvent_0"  target="RVoAwL0zZB">
					<script>
						setActions('');
					</script>
					<script>
						shiftsShow();
					</script>
					<script>
						increasePay(10);
					</script>
					 <assign location="numb" expr="getRandomInteger(3);"/>
					<script>
						popMsg();
					</script>
				</transition>
			</parallel>
			<state id="RVoAwL0zZB">
				<onentry>
					<send event="RVoAwL0zZB_t_2_timeEvent_0" delay="4s"/>
				</onentry>
				<onexit>
					<cancel sendid="RVoAwL0zZB_t_2_timeEvent_0" />
				</onexit>
				<onentry>
					<script>
						shiftHighlightAssigned(numb);
					</script>
					 <assign location="txt" expr="getEnergy(); &gt;= 25 ? 'Selected shift will start soon...' : 'Not enough energy left. Go home'"/>
					<script>
						setMsg(txt);
					</script>
				</onentry>
				<transition event="employee.shiftClicked"  target="RVoAwL0zZB">
					 <assign location="numb" expr="_event.data"/>
				</transition>
				<transition event="employee.goHome"  target="AtHome">
					<script>
						popMsg();
					</script>
					<script>
						setMsg('At home');
					</script>
					<script>
						shiftsHide();
					</script>
					<script>
						increaseEnergy(50);
					</script>
				</transition>
				<transition event="RVoAwL0zZB_t_2_timeEvent_0" cond="getEnergy(); &gt;= 25" target="Jj0bRX4oeX">
				</transition>
			</state>
		</state>
		<state id="AtHome">
			<transition event="employee.goHome"  target="AtHome">
				<script>
					setMsg('Already at home.');
				</script>
			</transition>
			<transition event="employee.goToWork"  target="wQwDAd5UiA">
				<script>
					setMsg('At work');
				</script>
				<script>
					shiftsShow();
				</script>
				 <assign location="numb" expr="getRandomInteger(3);"/>
			</transition>
		</state>
	</state>
</scxml>
