<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="Wei">
	<datamodel>
		<data expr="0" id="employee_selectedShift" />
		<data expr="false" id="employee_toiletBreaking" />
		<data expr="false" id="timers_countdown" />
	</datamodel>
	<state id="Ka0UpJ1yfX">
		<initial>
			<transition target="JjcUBYXnrY" type="internal">
			</transition>
		</initial>
		<parallel id="JjcUBYXnrY">
			<state id="zV9TOF9D5Z">
				<initial>
					<transition target="eYTHWckhHe" type="internal">
					</transition>
				</initial>
				<state id="eYTHWckhHe">
					<transition event="ui.actionPressed"  target="oKW5D5Mjz5">
					</transition>
				</state>
				<state id="oKW5D5Mjz5">
					<onentry>
						<send event="oKW5D5Mjz5_t_1_timeEvent_0" delay="500ms"/>
					</onentry>
					<onexit>
						<cancel sendid="oKW5D5Mjz5_t_1_timeEvent_0" />
					</onexit>
					<transition event="ui.actionReleased"  target="eYTHWckhHe">
					</transition>
					<transition event="oKW5D5Mjz5_t_1_timeEvent_0"  target="K5FuxJhdTC">
					</transition>
				</state>
				<state id="K5FuxJhdTC">
					<transition event="ui.actionReleased"  target="eYTHWckhHe">
						<send event="ui.action">
						<content expr="_event.data" />
						</send>
					</transition>
				</state>
			</state>
			<state id="N1Ph0qg24c">
				<initial>
					<transition target="wTKsBI7NHB" type="internal">
					</transition>
				</initial>
				<state id="wTKsBI7NHB">
					<transition event="timers.graceStart"  target="qFbcsHHDl6">
					</transition>
				</state>
				<state id="qFbcsHHDl6">
					<onentry>
						<send event="qFbcsHHDl6_t_1_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="qFbcsHHDl6_t_1_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							pushMsg();
						</script>
					</onentry>
					<onexit>
						<script>
							popMsg();
						</script>
					</onexit>
					<initial>
						<transition target="O7H8SNylsl" type="internal">
						</transition>
					</initial>
					<state id="O7H8SNylsl">
						<onentry>
							<send event="O7H8SNylsl_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="O7H8SNylsl_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<script>
								setMsg('Next shift starts in 4..');
							</script>
						</onentry>
						<transition event="O7H8SNylsl_t_0_timeEvent_0"  target="CW5pSazc6t">
						</transition>
					</state>
					<state id="CW5pSazc6t">
						<onentry>
							<send event="CW5pSazc6t_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="CW5pSazc6t_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<script>
								setMsg('Next shift starts in 3..');
							</script>
						</onentry>
						<transition event="CW5pSazc6t_t_0_timeEvent_0"  target="WRUfr7Gp9R">
						</transition>
					</state>
					<state id="WRUfr7Gp9R">
						<onentry>
							<send event="WRUfr7Gp9R_t_0_timeEvent_0" delay="900ms"/>
						</onentry>
						<onexit>
							<cancel sendid="WRUfr7Gp9R_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<script>
								setMsg('Next shift starts in 2..');
							</script>
						</onentry>
						<transition event="WRUfr7Gp9R_t_0_timeEvent_0"  target="OVEs6wpBIe">
						</transition>
					</state>
					<state id="OVEs6wpBIe">
						<onentry>
							<script>
								setMsg('Next shift starts in 1..');
							</script>
						</onentry>
					</state>
					<transition event="employee.goHome"  target="wTKsBI7NHB">
					</transition>
					<transition event="qFbcsHHDl6_t_1_timeEvent_0"  target="Ve4q96cuLc">
					</transition>
				</state>
				<state id="Ve4q96cuLc">
					<onentry>
						<send event="Ve4q96cuLc_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="Ve4q96cuLc_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="timers.shiftStart">
						</send>
					</onentry>
					<initial>
						<transition target="vyBfV18rmh" type="internal">
						</transition>
					</initial>
					<state id="vyBfV18rmh">
						<onentry>
							<send event="vyBfV18rmh_t_0_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="vyBfV18rmh_t_0_timeEvent_0" />
						</onexit>
						<onentry>
							<send event="vyBfV18rmh_t_1_timeEvent_0" delay="1s"/>
						</onentry>
						<onexit>
							<cancel sendid="vyBfV18rmh_t_1_timeEvent_0" />
						</onexit>
						<transition event="vyBfV18rmh_t_0_timeEvent_0" cond="!employee_toiletBreaking" target="vyBfV18rmh">
							<script>
								increaseEnergy(-2);
							</script>
						</transition>
						<transition event="vyBfV18rmh_t_1_timeEvent_0"  target="vyBfV18rmh">
						</transition>
					</state>
					<transition event="Ve4q96cuLc_t_0_timeEvent_0"  target="wTKsBI7NHB">
						<send event="timers.shiftEnd">
						</send>
					</transition>
				</state>
			</state>
			<state id="YGkWlmqxyx">
				<initial>
					<transition target="U23M8F7Bnf" type="internal">
					<script>
						setMsg('At home.');
					</script>
					</transition>
				</initial>
				<state id="U23M8F7Bnf">
					<transition event="employee.goToWork"  target="dIFRuZw7zC">
						<script>
							setMsg('At work.');
						</script>
						<script>
							shiftsShow();
						</script>
						 <assign location="employee_selectedShift" expr="getRandomInteger(3);"/>
						<script>
							shiftHighlightAssigned(employee_selectedShift);
						</script>
					</transition>
					<transition event="employee.goHome"  target="U23M8F7Bnf">
						<script>
							setMsg('Already at home.');
						</script>
					</transition>
				</state>
				<state id="dIFRuZw7zC">
					<onentry>
						<if cond="getEnergy(); &gt;= 25">
						<send event="timers.graceStart">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="getEnergy(); &lt; 25">
						<script>
							setMsg('I should go home now, I'm tired.');
						</script>
						</if>
					</onentry>
					<transition event="timers.shiftStart"  target="QTNR7VHDgC">
						<script>
							shiftHighlightActive(employee_selectedShift);
						</script>
					</transition>
					<transition event="employee.goHome"  target="U23M8F7Bnf">
						<script>
							setMsg('At home.');
						</script>
						<script>
							shiftsHide();
						</script>
						<script>
							increaseEnergy(50);
						</script>
					</transition>
					<transition event="employee.goToWork"  target="dIFRuZw7zC">
						<script>
							setMsg('Already working');
						</script>
					</transition>
					<transition event="employee.shiftClicked"  target="dIFRuZw7zC">
						 <assign location="employee_selectedShift" expr="_event.data"/>
						<script>
							shiftHighlightAssigned(employee_selectedShift);
						</script>
					</transition>
				</state>
				<state id="QTNR7VHDgC">
					<onentry>
						<script>
							pushMsg();
						</script>
					</onentry>
					<onexit>
						<script>
							popMsg();
						</script>
					</onexit>
					<initial>
						<transition target="QTNR7VHDgC.choice_0" type="internal">
						</transition>
					</initial>
					<state id="kHONNxfDjQ">
						<initial>
							<transition target="RuPzAiPwy8" type="internal">
							</transition>
						</initial>
						<state id="RuPzAiPwy8">
							<onentry>
								<script>
									setActions('Walk,Toilet Break');
								</script>
								<script>
									setMsg('At Stock');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="mhZj3b7Apr">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Toilet Break'" target="EqtASrYih3">
								 <assign location="employee_toiletBreaking" expr="true"/>
							</transition>
						</state>
						<state id="mhZj3b7Apr">
							<onentry>
								<script>
									setActions('Walk,Pick up');
								</script>
								<script>
									setMsg('At truck');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="RuPzAiPwy8">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Pick up'" target="MLAJitzlsw">
							</transition>
						</state>
						<state id="MLAJitzlsw">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At truck, carrying material.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="u6HDgFP7JD">
							</transition>
						</state>
						<state id="u6HDgFP7JD">
							<onentry>
								<script>
									setActions('Walk,Drop');
								</script>
								<script>
									setMsg('At stock, carrying material.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="MLAJitzlsw">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Drop'" target="RuPzAiPwy8">
								<script>
									increaseMaterial(1);
								</script>
							</transition>
						</state>
						<state id="EqtASrYih3">
							<onentry>
								<script>
									setActions('Done');
								</script>
								<script>
									setMsg('On the toilet.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Done'" target="RuPzAiPwy8">
								 <assign location="employee_toiletBreaking" expr="false"/>
							</transition>
						</state>
					</state>
					<state id="gQoYnFaTMP">
						<initial>
							<transition target="HztjZehpMI" type="internal">
							</transition>
						</initial>
						<state id="HztjZehpMI">
							<onentry>
								<script>
									setActions('Walk,Pick up,Toilet Break');
								</script>
								<script>
									setMsg('In Stock');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="FCRvbNWOwI">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Pick up' &amp;&amp; getFinished(); &gt; 0" target="qvCO4p68sC">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Toilet Break'" target="sRfUJ4UViQ">
								 <assign location="employee_toiletBreaking" expr="true"/>
							</transition>
						</state>
						<state id="FCRvbNWOwI">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At truck');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="HztjZehpMI">
							</transition>
						</state>
						<state id="AtTruckCarrying">
							<onentry>
								<script>
									setActions('Walk,Drop');
								</script>
								<script>
									setMsg('At truck, carrying material.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="qvCO4p68sC">
							</transition>
							<transition event="ui.action" cond="_event.data == 'Drop'" target="FCRvbNWOwI">
								<script>
									increaseFinished(-1);
								</script>
							</transition>
						</state>
						<state id="qvCO4p68sC">
							<onentry>
								<script>
									setActions('Walk');
								</script>
								<script>
									setMsg('At stock, carrying material.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Walk'" target="AtTruckCarrying">
							</transition>
						</state>
						<state id="sRfUJ4UViQ">
							<onentry>
								<script>
									setActions('Done');
								</script>
								<script>
									setMsg('On the toilet.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Done'" target="HztjZehpMI">
								 <assign location="employee_toiletBreaking" expr="false"/>
							</transition>
						</state>
					</state>
					<state id="lkkMbRBRzT">
						<initial>
							<transition target="cesmhuqi1L" type="internal">
							</transition>
						</initial>
						<state id="cesmhuqi1L">
							<onentry>
								<script>
									setActions('Assemble');
								</script>
								<script>
									setMsg('At assembly.');
								</script>
							</onentry>
							<transition event="ui.action" cond="_event.data == 'Assemble' &amp;&amp; getMaterial(); &gt; 0" target="cesmhuqi1L">
								<script>
									increaseMaterial(-1);
								</script>
								<script>
									increaseFinished(1);
								</script>
							</transition>
						</state>
					</state>
					<state id="QTNR7VHDgC.choice_0">
						<transition  cond="employee_selectedShift == 0" target="kHONNxfDjQ">
						</transition>
						<transition  cond="employee_selectedShift == 1" target="lkkMbRBRzT">
						</transition>
						<transition   target="gQoYnFaTMP">
						</transition>
					</state>
					<transition event="timers.shiftEnd"  target="dIFRuZw7zC">
						 <assign location="employee_selectedShift" expr="getRandomInteger(3);"/>
						<script>
							shiftHighlightAssigned(employee_selectedShift);
						</script>
						<script>
							increasePay(10);
						</script>
						<script>
							setActions('');
						</script>
						 <assign location="employee_toiletBreaking" expr="false"/>
					</transition>
				</state>
			</state>
		</parallel>
	</state>
</scxml>
