<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="Jol">
	<datamodel>
		<data expr="0" id="shift" />
		<data expr="" id="Action" />
	</datamodel>
	<state id="TMCcx514Gi">
		<initial>
			<transition target="YDUU6EY7UJ" type="internal">
			</transition>
		</initial>
		<state id="YDUU6EY7UJ">
			<onentry>
				<script>
					shiftsHide();
				</script>
				<script>
					setMsg('At home');
				</script>
			</onentry>
			<onentry>
				<if cond="getEnergy(); + 50 &gt; 100">
				<script>
					increaseEnergy(100 - getEnergy(););
				</script>
				</if>
			</onentry>
			<onentry>
				<if cond="getEnergy(); + 50 &lt;= 100">
				<script>
					increaseEnergy(50);
				</script>
				</if>
			</onentry>
			<transition event="employee.goToWork"  target="GyRMnUYNq4">
			</transition>
		</state>
		<parallel id="GyRMnUYNq4">
			<state id="mkKVP72FJS">
				<initial>
					<transition target="NMaqYQ9WzT" type="internal">
					</transition>
				</initial>
				<state id="Crk7Wkac4i">
					<onentry>
						<send event="Crk7Wkac4i_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="Crk7Wkac4i_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							shiftHighlightActive(shift);
						</script>
						<send event="Working">
						</send>
					</onentry>
					<onexit>
						<script>
							increasePay(10);
						</script>
					</onexit>
					<initial>
						<transition target="ohjj9GTFES" type="internal">
						</transition>
					</initial>
					<state id="ohjj9GTFES">
						<onentry>
							<script>
								setActions('Walk,Toilet break');
							</script>
							<script>
								setMsg('At work
								Working shift
								At stock.');
							</script>
						</onentry>
						<transition event="Walk"  target="Ix4ktgiwUX">
						</transition>
						<transition event="toilet"  target="EWeEs1UGph">
						</transition>
					</state>
					<state id="Ix4ktgiwUX">
						<onentry>
							<script>
								setActions('Walk,Pick up');
							</script>
							<script>
								setMsg('At work
								Working shift
								At truck.');
							</script>
						</onentry>
						<transition event="Walk"  target="ohjj9GTFES">
						</transition>
						<transition event="pickup"  target="w06I7nWx1Q">
						</transition>
					</state>
					<state id="Si4p020h1J">
						<onentry>
							<script>
								setActions('Walk,Drop');
							</script>
							<script>
								setMsg('At work
								Working shift
								At stock, carrying material.');
							</script>
						</onentry>
						<transition event="Walk"  target="w06I7nWx1Q">
						</transition>
						<transition event="drop"  target="ohjj9GTFES">
							<script>
								increaseMaterial(1);
							</script>
						</transition>
					</state>
					<state id="w06I7nWx1Q">
						<onentry>
							<script>
								setActions('Walk');
							</script>
							<script>
								setMsg('At work
								Working shift
								At truck, carrying material.');
							</script>
						</onentry>
						<transition event="Walk"  target="Si4p020h1J">
						</transition>
					</state>
					<state id="EWeEs1UGph">
						<onentry>
							<script>
								setActions('Done');
							</script>
							<script>
								setMsg('At work
								Taking toilet break.');
							</script>
						</onentry>
						<transition event="toilet_done"  target="ohjj9GTFES">
						</transition>
					</state>
					<transition event="Crk7Wkac4i_t_0_timeEvent_0"  target="NMaqYQ9WzT">
					</transition>
				</state>
				<state id="SE4VP2mfLD">
					<onentry>
						<send event="SE4VP2mfLD_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="SE4VP2mfLD_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							shiftHighlightActive(shift);
						</script>
						<send event="Working">
						</send>
					</onentry>
					<onexit>
						<script>
							increasePay(10);
						</script>
					</onexit>
					<initial>
						<transition target="LJKh9wo2Cf" type="internal">
						</transition>
					</initial>
					<state id="LJKh9wo2Cf">
						<onentry>
							<script>
								setActions('Walk,Pick up,Toilet break');
							</script>
							<script>
								setMsg('At work
								Working shift
								In stock.');
							</script>
						</onentry>
						<transition event="Walk"  target="wyZmHbxs50">
						</transition>
						<transition event="pickup" cond="getFinished(); &gt; 0" target="KnsvAJegcs">
						</transition>
						<transition event="toilet"  target="IbJfY6vHGH">
						</transition>
					</state>
					<state id="wyZmHbxs50">
						<onentry>
							<script>
								setActions('Walk');
							</script>
							<script>
								setMsg('At work
								Working shift
								At truck.');
							</script>
						</onentry>
						<transition event="Walk"  target="LJKh9wo2Cf">
						</transition>
					</state>
					<state id="KnsvAJegcs">
						<onentry>
							<script>
								setActions('Walk');
							</script>
							<script>
								setMsg('At work
								Working shift
								At stock, carrying product.');
							</script>
						</onentry>
						<transition event="Walk"  target="atTruckCarrying">
						</transition>
					</state>
					<state id="atTruckCarrying">
						<onentry>
							<script>
								setActions('Walk,Drop');
							</script>
							<script>
								setMsg('At work
								Working shift
								At truck, carrying product.');
							</script>
						</onentry>
						<transition event="Walk"  target="KnsvAJegcs">
						</transition>
						<transition event="drop"  target="wyZmHbxs50">
							<script>
								increaseFinished(-1);
							</script>
						</transition>
					</state>
					<state id="IbJfY6vHGH">
						<onentry>
							<script>
								setActions('Done');
							</script>
							<script>
								setMsg('At work
								Taking toilet break.');
							</script>
						</onentry>
						<transition event="toilet_done"  target="LJKh9wo2Cf">
						</transition>
					</state>
					<transition event="SE4VP2mfLD_t_0_timeEvent_0"  target="NMaqYQ9WzT">
					</transition>
				</state>
				<state id="vVpd1vr4Bi">
					<onentry>
						<send event="vVpd1vr4Bi_t_0_timeEvent_0" delay="10s"/>
					</onentry>
					<onexit>
						<cancel sendid="vVpd1vr4Bi_t_0_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							shiftHighlightActive(shift);
						</script>
						<send event="Working">
						</send>
					</onentry>
					<onexit>
						<script>
							increasePay(10);
						</script>
					</onexit>
					<initial>
						<transition target="AN2lkHUWM4" type="internal">
						</transition>
					</initial>
					<state id="AN2lkHUWM4">
						<onentry>
							<script>
								setActions('Assemble');
							</script>
							<script>
								setMsg('At work
								Working shift
								At Assembly.');
							</script>
						</onentry>
						<transition event="Assemble" cond="getMaterial(); &gt; 0" target="U7goVGCLhV">
						</transition>
					</state>
					<state id="U7goVGCLhV">
						<onentry>
							<script>
								increaseFinished(1);
							</script>
							<script>
								increaseMaterial(-1);
							</script>
						</onentry>
						<transition   target="AN2lkHUWM4">
						</transition>
					</state>
					<transition event="vVpd1vr4Bi_t_0_timeEvent_0"  target="NMaqYQ9WzT">
					</transition>
				</state>
				<state id="NMaqYQ9WzT">
					<onentry>
						<script>
							shiftsShow();
						</script>
						<script>
							setActions('');
						</script>
						<script>
							shiftHighlightClear();
						</script>
						<script>
							setMsg('At work');
						</script>
						<send event="not_working">
						</send>
					</onentry>
					<onentry>
						<if cond="getEnergy(); &lt; 25">
						<script>
							setMsg('At work
							Energy low.');
						</script>
						</if>
					</onentry>
					<transition  cond="getEnergy(); &gt;= 25" target="aaClfrY2Oh">
						 <assign location="shift" expr="getRandomInteger(3);"/>
					</transition>
					<transition event="employee.goHome"  target="YDUU6EY7UJ">
					</transition>
				</state>
				<state id="aaClfrY2Oh">
					<onentry>
						<send event="aaClfrY2Oh_t_1_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="aaClfrY2Oh_t_1_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="aaClfrY2Oh_t_2_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="aaClfrY2Oh_t_2_timeEvent_0" />
					</onexit>
					<onentry>
						<send event="aaClfrY2Oh_t_3_timeEvent_0" delay="4s"/>
					</onentry>
					<onexit>
						<cancel sendid="aaClfrY2Oh_t_3_timeEvent_0" />
					</onexit>
					<onentry>
						<script>
							shiftHighlightClear();
						</script>
					</onentry>
					<onentry>
						<if cond="getEnergy(); &gt;= 25">
						<script>
							shiftHighlightAssigned(shift);
						</script>
						<script>
							setMsg('At work
							Selected shift will start soon.');
						</script>
						</if>
					</onentry>
					<transition event="employee.shiftClicked"  target="aaClfrY2Oh">
						 <assign location="shift" expr="_event.data"/>
					</transition>
					<transition event="aaClfrY2Oh_t_1_timeEvent_0" cond="shift == 0 &amp;&amp; getEnergy(); &gt;= 25" target="Crk7Wkac4i">
					</transition>
					<transition event="aaClfrY2Oh_t_2_timeEvent_0" cond="shift == 2 &amp;&amp; getEnergy(); &gt;= 25" target="SE4VP2mfLD">
					</transition>
					<transition event="aaClfrY2Oh_t_3_timeEvent_0" cond="shift == 1 &amp;&amp; getEnergy(); &gt;= 25" target="vVpd1vr4Bi">
					</transition>
					<transition event="employee.goHome"  target="YDUU6EY7UJ">
					</transition>
				</state>
			</state>
			<state id="m2BXS2D9eu">
				<initial>
					<transition target="lqA9bN1W1n" type="internal">
					</transition>
				</initial>
				<state id="lqA9bN1W1n">
					<transition event="ui.actionPressed"  target="OcTWMUAhuo">
						 <assign location="Action" expr="_event.data"/>
					</transition>
				</state>
				<state id="OcTWMUAhuo">
					<onentry>
						<send event="OcTWMUAhuo_t_1_timeEvent_0" delay="500ms"/>
					</onentry>
					<onexit>
						<cancel sendid="OcTWMUAhuo_t_1_timeEvent_0" />
					</onexit>
					<transition event="ui.actionReleased"  target="lqA9bN1W1n">
					</transition>
					<transition event="OcTWMUAhuo_t_1_timeEvent_0"  target="qdhWPsL0yD">
					</transition>
				</state>
				<state id="M5QuZfmHjf">
					<onentry>
						<if cond="Action == 'Toilet break'">
						<send event="toilet">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="Action == 'Walk'">
						<send event="Walk">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="Action == 'Drop'">
						<send event="drop">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="Action == 'Pick up'">
						<send event="pickup">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="Action == 'Done'">
						<send event="toilet_done">
						</send>
						</if>
					</onentry>
					<onentry>
						<if cond="Action == 'Assemble'">
						<send event="Assemble">
						</send>
						</if>
					</onentry>
					<transition   target="lqA9bN1W1n">
					</transition>
				</state>
				<state id="qdhWPsL0yD">
					<transition event="ui.actionReleased"  target="M5QuZfmHjf">
					</transition>
				</state>
			</state>
			<state id="_r2">
				<initial>
					<transition target="prq98rOd7k" type="internal">
					</transition>
				</initial>
				<state id="prq98rOd7k">
					<transition event="Working"  target="LUKsSkrxAQ">
					</transition>
					<transition event="toilet_done"  target="LUKsSkrxAQ">
					</transition>
				</state>
				<state id="LUKsSkrxAQ">
					<onentry>
						<send event="LUKsSkrxAQ_t_0_timeEvent_0" delay="2s"/>
					</onentry>
					<onexit>
						<cancel sendid="LUKsSkrxAQ_t_0_timeEvent_0" />
					</onexit>
					<transition event="LUKsSkrxAQ_t_0_timeEvent_0"  target="LUKsSkrxAQ">
						<script>
							increaseEnergy(-2);
						</script>
					</transition>
					<transition event="not_working"  target="prq98rOd7k">
					</transition>
					<transition event="toilet"  target="prq98rOd7k">
					</transition>
				</state>
			</state>
		</parallel>
	</state>
</scxml>
