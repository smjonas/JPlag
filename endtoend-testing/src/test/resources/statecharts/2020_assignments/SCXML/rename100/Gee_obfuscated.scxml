<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" datamodel="ecmascript" name="Gee">
	<datamodel>
		<data expr="0" id="shiftTypeUnload" />
		<data expr="1" id="shiftTypeAssembly" />
		<data expr="3" id="shiftTypes" />
		<data expr="0" id="selectedShiftType" />
	</datamodel>
	<state id="MRLtoFC41Z">
		<initial>
			<transition target="gtJpcTqrNU" type="internal">
			</transition>
		</initial>
		<state id="u7MIBlwJTr">
			<onentry>
				<script>
					shiftsShow();
				</script>
				<script>
					setMsg('At work.');
				</script>
				<script>
					pushMsg();
				</script>
			</onentry>
			<onexit>
				<script>
					popMsg();
				</script>
				<script>
					shiftsHide();
				</script>
			</onexit>
			<initial>
				<transition target="gCAqCA6z52" type="internal">
				</transition>
			</initial>
			<state id="gCAqCA6z52">
				<onentry>
					<send event="gCAqCA6z52_t_1_timeEvent_0" delay="4s"/>
				</onentry>
				<onexit>
					<cancel sendid="gCAqCA6z52_t_1_timeEvent_0" />
				</onexit>
				<onentry>
					<script>
						setMsg('Selected shift will start soon...');
					</script>
				</onentry>
				<initial>
					<transition target="SelectRandom" type="internal">
					</transition>
				</initial>
				<state id="SelectRandom">
					<onentry>
						 <assign location="selectedShiftType" expr="getRandomInteger(shiftTypes);"/>
						<script>
							shiftHighlightAssigned(selectedShiftType);
						</script>
					</onentry>
					<transition event="employee.shiftClicked"  target="LU5wh4UrP4">
					</transition>
				</state>
				<state id="LU5wh4UrP4">
					<onentry>
						 <assign location="selectedShiftType" expr="_event.data"/>
						<script>
							shiftHighlightAssigned(selectedShiftType);
						</script>
					</onentry>
					<transition event="employee.shiftClicked"  target="LU5wh4UrP4">
					</transition>
				</state>
				<transition event="employee.goHome"  target="Rest">
				</transition>
				<transition event="gCAqCA6z52_t_1_timeEvent_0"  target="Tt3UUfsvaf">
				</transition>
			</state>
			<parallel id="Tt3UUfsvaf">
				<onentry>
					<send event="Tt3UUfsvaf_t_0_timeEvent_0" delay="10s"/>
				</onentry>
				<onexit>
					<cancel sendid="Tt3UUfsvaf_t_0_timeEvent_0" />
				</onexit>
				<onentry>
					<script>
						shiftHighlightActive(selectedShiftType);
					</script>
					<script>
						setMsg('Working shift.');
					</script>
					<script>
						pushMsg();
					</script>
				</onentry>
				<onexit>
					<script>
						increasePay(10);
					</script>
					<script>
						setActions('');
					</script>
					<script>
						popMsg();
					</script>
				</onexit>
				<state id="fhKse509kW">
					<initial>
						<transition target="yMLqgEDvmT" type="internal">
						</transition>
					</initial>
					<state id="yMLqgEDvmT">
						<initial>
							<transition target="ZfgKgbhQVb" type="internal">
							</transition>
						</initial>
						<state id="ZfgKgbhQVb">
							<transition event="ui.actionPressed"  target="RDVTQ00NOt">
							</transition>
						</state>
						<state id="W1eibVOYkS">
							<transition event="ui.actionReleased"  target="yMLqgEDvmT.choice_0">
							</transition>
						</state>
						<state id="RDVTQ00NOt">
							<onentry>
								<send event="RDVTQ00NOt_t_0_timeEvent_0" delay="500ms"/>
							</onentry>
							<onexit>
								<cancel sendid="RDVTQ00NOt_t_0_timeEvent_0" />
							</onexit>
							<transition event="RDVTQ00NOt_t_0_timeEvent_0"  target="W1eibVOYkS">
							</transition>
							<transition event="ui.actionReleased"  target="ZfgKgbhQVb">
							</transition>
						</state>
						<state id="yMLqgEDvmT.choice_0">
							<transition  cond="_event.data == 'Walk'" target="ZfgKgbhQVb">
								<send event="walk">
								</send>
							</transition>
							<transition  cond="_event.data == 'Drop'" target="ZfgKgbhQVb">
								<send event="drop">
								</send>
							</transition>
							<transition  cond="_event.data == 'Pick up'" target="ZfgKgbhQVb">
								<send event="pickup">
								</send>
							</transition>
							<transition  cond="_event.data == 'Assemble'" target="ZfgKgbhQVb">
								<send event="assemble">
								</send>
							</transition>
							<transition  cond="_event.data == 'Toilet break'" target="ZfgKgbhQVb">
								<send event="toiletbreak">
								</send>
							</transition>
							<transition  cond="_event.data == 'Done'" target="ZfgKgbhQVb">
								<send event="done">
								</send>
							</transition>
							<transition   target="ZfgKgbhQVb">
								<send event="other">
								</send>
							</transition>
						</state>
					</state>
				</state>
				<state id="beglsmVhEW">
					<initial>
						<transition target="P2dP7fa42R" type="internal">
						</transition>
					</initial>
					<parallel id="P2dP7fa42R">
						<state id="lBDwh1dAe6">
							<initial>
								<transition target="Pkm5d2zYpJ" type="internal">
								</transition>
							</initial>
							<state id="Pkm5d2zYpJ">
								<onentry>
									<send event="Pkm5d2zYpJ_t_0_timeEvent_0" delay="1s"/>
								</onentry>
								<onexit>
									<cancel sendid="Pkm5d2zYpJ_t_0_timeEvent_0" />
								</onexit>
								<onexit>
									<script>
										increaseEnergy(-2);
									</script>
								</onexit>
								<transition event="Pkm5d2zYpJ_t_0_timeEvent_0"  target="Pkm5d2zYpJ">
								</transition>
							</state>
						</state>
						<state id="frfz0q03VN">
							<initial>
								<transition target="P2dP7fa42R.frfz0q03VN.choice_0" type="internal">
								</transition>
							</initial>
							<state id="wK2uv56Xxi">
								<onentry>
									<script>
										setMsg('Unloading.');
									</script>
									<script>
										pushMsg();
									</script>
								</onentry>
								<onexit>
									<script>
										setActions('');
									</script>
									<script>
										popMsg();
									</script>
								</onexit>
								<initial>
									<transition target="TR5KH3mZGb" type="internal">
									</transition>
								</initial>
								<state id="TR5KH3mZGb">
									<onentry>
										<script>
											setActions('Walk,Toilet break');
										</script>
										<script>
											setMsg('At stock.');
										</script>
									</onentry>
									<transition event="toiletbreak"  target="PuUineYEXk">
									</transition>
									<transition event="walk"  target="E5KcGhZSHw">
									</transition>
								</state>
								<state id="E5KcGhZSHw">
									<onentry>
										<script>
											setActions('Walk,Pick up');
										</script>
										<script>
											setMsg('At truck.');
										</script>
									</onentry>
									<transition event="walk"  target="TR5KH3mZGb">
									</transition>
									<transition event="pickup"  target="h3SPGzDrNF">
									</transition>
								</state>
								<state id="ya1atYtx21">
									<onentry>
										<script>
											setActions('Walk,Drop');
										</script>
										<script>
											setMsg('At stock, carrying material.');
										</script>
									</onentry>
									<transition event="walk"  target="h3SPGzDrNF">
									</transition>
									<transition event="drop"  target="TR5KH3mZGb">
										<script>
											increaseMaterial(1);
										</script>
									</transition>
								</state>
								<state id="h3SPGzDrNF">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At truck, carrying material.');
										</script>
									</onentry>
									<transition event="walk"  target="ya1atYtx21">
									</transition>
								</state>
							</state>
							<state id="JR2CUwRKtr">
								<onentry>
									<script>
										setMsg('Assembling.');
									</script>
									<script>
										setActions('Assemble');
									</script>
									<script>
										pushMsg();
									</script>
								</onentry>
								<onexit>
									<script>
										setActions('');
									</script>
									<script>
										popMsg();
									</script>
								</onexit>
								<initial>
									<transition target="fjCiXn8NRO" type="internal">
									</transition>
								</initial>
								<state id="fjCiXn8NRO">
									<transition event="assemble" cond="getMaterial(); &gt; 0" target="fjCiXn8NRO">
										<script>
											increaseMaterial(-1);
										</script>
										<script>
											increaseFinished(1);
										</script>
									</transition>
								</state>
							</state>
							<history type="deep" id="EjIQqx94dt">
								<transition target="P2dP7fa42R.frfz0q03VN.choice_0">
								</transition>
							</history>
							<state id="K3AEl7AtDF">
								<onentry>
									<script>
										setMsg('Loading.');
									</script>
									<script>
										pushMsg();
									</script>
								</onentry>
								<onexit>
									<script>
										setActions('');
									</script>
									<script>
										popMsg();
									</script>
								</onexit>
								<initial>
									<transition target="gz1SxBB2zG" type="internal">
									</transition>
								</initial>
								<state id="gz1SxBB2zG">
									<onentry>
										<script>
											setActions('Walk,Pick up,Toilet break');
										</script>
										<script>
											setMsg('At stock.');
										</script>
									</onentry>
									<transition event="pickup" cond="getFinished(); &gt; 0" target="V9Hi1vwoYO">
									</transition>
									<transition event="toiletbreak"  target="PuUineYEXk">
									</transition>
									<transition event="walk"  target="cIUs8WxVfN">
									</transition>
								</state>
								<state id="cIUs8WxVfN">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At truck.');
										</script>
									</onentry>
									<transition event="walk"  target="gz1SxBB2zG">
									</transition>
								</state>
								<state id="V9Hi1vwoYO">
									<onentry>
										<script>
											setActions('Walk');
										</script>
										<script>
											setMsg('At stock, carrying material.');
										</script>
									</onentry>
									<transition event="walk"  target="zEN0fZtHoo">
									</transition>
								</state>
								<state id="zEN0fZtHoo">
									<onentry>
										<script>
											setActions('Walk,Drop');
										</script>
										<script>
											setMsg('At truck, carrying material.');
										</script>
									</onentry>
									<transition event="walk"  target="V9Hi1vwoYO">
									</transition>
									<transition event="drop"  target="cIUs8WxVfN">
										<script>
											increaseFinished(-1);
										</script>
									</transition>
								</state>
							</state>
							<state id="P2dP7fa42R.frfz0q03VN.choice_0">
								<transition  cond="selectedShiftType == shiftTypeAssembly" target="JR2CUwRKtr">
								</transition>
								<transition  cond="selectedShiftType == shiftTypeUnload" target="wK2uv56Xxi">
								</transition>
								<transition   target="K3AEl7AtDF">
								</transition>
							</state>
						</state>
					</parallel>
					<state id="PuUineYEXk">
						<onentry>
							<script>
								setActions('Done');
							</script>
							<script>
								setMsg('At toilet.');
							</script>
						</onentry>
						<onexit>
							<script>
								setActions('');
							</script>
						</onexit>
						<transition event="done"  target="EjIQqx94dt">
						</transition>
					</state>
				</state>
				<transition event="Tt3UUfsvaf_t_0_timeEvent_0"  target="u7MIBlwJTr.choice_0">
				</transition>
			</parallel>
			<state id="CYwBKwQXiJ">
				<onentry>
					<script>
						setMsg('Too low energy to work a shift.');
					</script>
				</onentry>
				<transition event="employee.goHome"  target="Rest">
				</transition>
			</state>
			<state id="u7MIBlwJTr.choice_0">
				<transition  cond="getEnergy(); &lt; 25" target="CYwBKwQXiJ">
				</transition>
				<transition   target="gCAqCA6z52">
				</transition>
			</state>
		</state>
		<state id="gtJpcTqrNU">
			<onentry>
				<script>
					setMsg('At home.');
				</script>
			</onentry>
			<initial>
				<transition target="HVTjQzYUfi" type="internal">
				</transition>
			</initial>
			<state id="HVTjQzYUfi">
			</state>
			<state id="Rest">
				<onexit>
					<script>
						increaseEnergy(50);
					</script>
				</onexit>
			</state>
			<transition event="employee.goToWork"  target="u7MIBlwJTr">
			</transition>
		</state>
	</state>
</scxml>
