<?xml version="1.0" encoding="UTF-8"?>
<sgraph:Statechart xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:sgraph="http://www.yakindu.org/sct/sgraph/2.0.0" xmi:id="_M_1-INLDEe28zv8lYWPWfQ" specification="// You are only allowed to edit the&#xA;// &quot;internal&quot; section, see below&#xA;&#xA;// DO NOT EDIT THESE OPTIONS&#xA;@EventDriven&#xA;@SuperSteps(no) &#xA;&#xA;interface:&#xA;&#x9;// DO NOT EDIT THE INTERFACE&#xA;&#x9;&#xA;&#x9;in event approachingStation: integer&#xA;&#x9;out event openDoors&#xA;&#x9;out event closeDoors&#xA;&#x9;out event startDoorsSignal&#xA;&#x9;out event stopDoorsSignal&#xA;&#x9;in event board&#xA;&#x9;in event unboard&#xA;&#x9;in event requestStop: integer&#xA;&#x9;out event setTargetSpeed: real&#xA;&#x9;in event atTargetSpeed&#xA;&#x9;&#xA;&#x9;in event startEmergency&#xA;&#x9;in event stopEmergency&#xA;&#xA;&#x9;var stopsAt: integer = 1&#xA;&#x9;var remainingCapacity: integer = 6&#xA;&#x9;var numPassengers: integer = 0&#xA;&#xA;&#x9;out event refreshUI&#xA;&#xA;internal:&#xA;&#x9;var currentSpeed: real&#xA;&#x9;var stop: integer&#xA;&#x9;var arrivingStation: integer&#xA;&#x9;var check: integer&#xA;&#x9;event setTimer: integer&#xA;&#x9;var timer: integer&#xA;&#x9;event timerOver&#xA;&#x9;event allowBoarding&#xA;&#x9;event blockBoarding&#xA;&#x9;// FEEL FREE TO EDIT&#xA;&#x9;// e.g. add internal variables,&#xA;&#x9;//       internal events, ..." name="Kat">
  <regions xmi:type="sgraph:Region" xmi:id="_M_1-IdLDEe28zv8lYWPWfQ" name="axwIGS6ATQ">
    <vertices xmi:type="sgraph:State" xmi:id="_M_1-ItLDEe28zv8lYWPWfQ" name="Trolley" incomingTransitions="_M_1-ftLDEe28zv8lYWPWfQ">
      <regions xmi:type="sgraph:Region" xmi:id="_M_1-I9LDEe28zv8lYWPWfQ" name="Stops">
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-JNLDEe28zv8lYWPWfQ" name="NoRequests" incomingTransitions="_M_1-KdLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-JdLDEe28zv8lYWPWfQ" specification="requestStop" target="_M_1-JtLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-JtLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;stop = valueof(requestStop);&#xD;&#xA;stopsAt |= (1 &lt;&lt; stop);&#xD;&#xA;raise refreshUI" name="StopRequest" incomingTransitions="_M_1-JdLDEe28zv8lYWPWfQ _M_1-J9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-J9LDEe28zv8lYWPWfQ" specification="requestStop" target="_M_1-JtLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-KNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-KdLDEe28zv8lYWPWfQ" target="_M_1-JNLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_M_1-KtLDEe28zv8lYWPWfQ" name="Boarding">
        <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-K9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-LNLDEe28zv8lYWPWfQ" specification="" target="_M_1-MdLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-LdLDEe28zv8lYWPWfQ" specification="" name="wf0BOxDj3d" incomingTransitions="_M_1-MtLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-LtLDEe28zv8lYWPWfQ" specification="allowBoarding" target="_M_1-MdLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-L9LDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;remainingCapacity -= 1;&#xD;&#xA;numPassengers +=1;&#xD;&#xA;raise refreshUI&#xD;&#xA;" name="Board" incomingTransitions="_M_1-M9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-MNLDEe28zv8lYWPWfQ" specification="after 1s" target="_M_1-N9LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-MdLDEe28zv8lYWPWfQ" specification="" name="MCI99lPKqa" incomingTransitions="_M_1-LtLDEe28zv8lYWPWfQ _M_1-LNLDEe28zv8lYWPWfQ _M_1-ONLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-MtLDEe28zv8lYWPWfQ" specification="blockBoarding" target="_M_1-LdLDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-M9LDEe28zv8lYWPWfQ" specification="board [remainingCapacity > 0] / raise setTimer:1000" target="_M_1-L9LDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-NNLDEe28zv8lYWPWfQ" specification="unboard [numPassengers > 0] / raise setTimer:1000" target="_M_1-NdLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-NdLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;remainingCapacity += 1;&#xD;&#xA;numPassengers -=1;&#xD;&#xA;raise refreshUI" name="Unboard" incomingTransitions="_M_1-NNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-NtLDEe28zv8lYWPWfQ" specification="after 1s" target="_M_1-N9LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-N9LDEe28zv8lYWPWfQ" specification="entry/&#xA;raise setTimer:1000" name="CIjtuvbxxv" incomingTransitions="_M_1-NtLDEe28zv8lYWPWfQ _M_1-MNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-ONLDEe28zv8lYWPWfQ" specification="always" target="_M_1-MdLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_M_1-OdLDEe28zv8lYWPWfQ" name="Timer">
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-OtLDEe28zv8lYWPWfQ" name="B0gVcdLi5I" incomingTransitions="_M_1-SNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-O9LDEe28zv8lYWPWfQ" specification="setTimer /&#xA;timer= valueof(setTimer)" target="_M_1-PtLDEe28zv8lYWPWfQ"/>
          <regions xmi:type="sgraph:Region" xmi:id="_M_1-PNLDEe28zv8lYWPWfQ" name="r1">
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-PdLDEe28zv8lYWPWfQ" specification="" name="T38HJdtCiO" incomingTransitions="_M_1-RtLDEe28zv8lYWPWfQ _M_1-QtLDEe28zv8lYWPWfQ"/>
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-PtLDEe28zv8lYWPWfQ" name="On" incomingTransitions="_M_1-O9LDEe28zv8lYWPWfQ">
              <regions xmi:type="sgraph:Region" xmi:id="_M_1-P9LDEe28zv8lYWPWfQ" name="gstvY4X9u2">
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-QNLDEe28zv8lYWPWfQ" specification="" name="Counting" incomingTransitions="_M_1-QdLDEe28zv8lYWPWfQ _M_1-RNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-QdLDEe28zv8lYWPWfQ" specification="after 10ms [timer > 0] /&#xA;timer -= 10" target="_M_1-QNLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-QtLDEe28zv8lYWPWfQ" specification="[ timer  == 0 ] / raise timerOver" target="_M_1-PdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-Q9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-RNLDEe28zv8lYWPWfQ" specification="" target="_M_1-QNLDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-RdLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-RtLDEe28zv8lYWPWfQ" specification="" target="_M_1-PdLDEe28zv8lYWPWfQ"/>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-R9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-SNLDEe28zv8lYWPWfQ" specification="" target="_M_1-OtLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_M_1-SdLDEe28zv8lYWPWfQ" name="Route">
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-StLDEe28zv8lYWPWfQ" name="r7tEkMj2oC" incomingTransitions="_M_1-cdLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-S9LDEe28zv8lYWPWfQ" specification="startEmergency" target="_M_1-ctLDEe28zv8lYWPWfQ"/>
          <regions xmi:type="sgraph:Region" xmi:id="_M_1-TNLDEe28zv8lYWPWfQ" name="r1">
            <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-TdLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-TtLDEe28zv8lYWPWfQ" specification="/arrivingStation = 0" target="_M_1-T9LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-T9LDEe28zv8lYWPWfQ" name="OpenedDoors" incomingTransitions="_M_1-TtLDEe28zv8lYWPWfQ _M_1-a9LDEe28zv8lYWPWfQ">
              <regions xmi:type="sgraph:Region" xmi:id="_M_1-UNLDEe28zv8lYWPWfQ" name="r1">
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-UdLDEe28zv8lYWPWfQ" name="Waiting" incomingTransitions="_M_1-VdLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-UtLDEe28zv8lYWPWfQ" specification="[stopsAt > 0 &amp;&amp; stop != arrivingStation] " target="_M_1-btLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_M_1-U9LDEe28zv8lYWPWfQ" incomingTransitions="_M_1-V9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-VNLDEe28zv8lYWPWfQ" specification="[stopsAt > 0] " target="_M_1-btLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-VdLDEe28zv8lYWPWfQ" specification="else" target="_M_1-UdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-VtLDEe28zv8lYWPWfQ" specification="" name="DoorsOpen" incomingTransitions="_M_1-WdLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-V9LDEe28zv8lYWPWfQ" specification="after 2s /&#xD;&#xA; stopsAt &amp;= ~(1 &lt;&lt; arrivingStation)" target="_M_1-U9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-WNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-WdLDEe28zv8lYWPWfQ" specification="" target="_M_1-VtLDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-WtLDEe28zv8lYWPWfQ" name="h" incomingTransitions="_M_1-ddLDEe28zv8lYWPWfQ" kind="SHALLOW_HISTORY"/>
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-W9LDEe28zv8lYWPWfQ" name="ClosedDoors">
              <regions xmi:type="sgraph:Region" xmi:id="_M_1-XNLDEe28zv8lYWPWfQ" name="s">
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-XdLDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;currentSpeed = 24;&#xD;&#xA;raise setTargetSpeed: currentSpeed" name="SetTime" incomingTransitions="_M_1-adLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-XtLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_M_1-ZtLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-X9LDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;arrivingStation = &#xD;&#xA;valueof(approachingStation);&#xD;&#xA;check = stopsAt &amp; (1 &lt;&lt; arrivingStation);&#xD;&#xA;raise refreshUI&#xD;&#xA;" name="fsTEZIxIR6" incomingTransitions="_M_1-Z9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-YNLDEe28zv8lYWPWfQ" specification="after 1ms" target="_M_1-YdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_M_1-YdLDEe28zv8lYWPWfQ" incomingTransitions="_M_1-YNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-YtLDEe28zv8lYWPWfQ" specification="[check != 0] " target="_M_1-ZNLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-Y9LDEe28zv8lYWPWfQ" specification="else" target="_M_1-ZtLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-ZNLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise setTargetSpeed:0" name="Arrival" incomingTransitions="_M_1-YtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-ZdLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_M_1-atLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-ZtLDEe28zv8lYWPWfQ" specification="" name="GoNormal" incomingTransitions="_M_1-Y9LDEe28zv8lYWPWfQ _M_1-XtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-Z9LDEe28zv8lYWPWfQ" specification="approachingStation" target="_M_1-X9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-aNLDEe28zv8lYWPWfQ" specification="entry /  &#xD;&#xA;raise closeDoors;&#xD;&#xA;raise blockBoarding;&#xD;&#xA;raise stopDoorsSignal; &#xD;&#xA;raise refreshUI" name="DoorsClose" incomingTransitions="_M_1-b9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-adLDEe28zv8lYWPWfQ" specification="after 1s" target="_M_1-XdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-atLDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;currentSpeed = 0" name="Arrived" incomingTransitions="_M_1-ZdLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-a9LDEe28zv8lYWPWfQ" specification="after 1s / raise openDoors; &#xD;&#xA;raise refreshUI;&#xD;&#xA;raise allowBoarding&#xD;&#xA;" target="_M_1-T9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-bNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-bdLDEe28zv8lYWPWfQ" specification="" target="_M_1-btLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_M_1-btLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise startDoorsSignal;&#xD;&#xA;raise refreshUI;&#xD;&#xA;raise setTimer:1000" name="Signaling" incomingTransitions="_M_1-VNLDEe28zv8lYWPWfQ _M_1-bdLDEe28zv8lYWPWfQ _M_1-UtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-b9LDEe28zv8lYWPWfQ" specification="timerOver " target="_M_1-aNLDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-cNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-cdLDEe28zv8lYWPWfQ" target="_M_1-StLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_M_1-ctLDEe28zv8lYWPWfQ" name="A7Vi0KYPRv" incomingTransitions="_M_1-S9LDEe28zv8lYWPWfQ">
          <regions xmi:type="sgraph:Region" xmi:id="_M_1-c9LDEe28zv8lYWPWfQ" name="r1">
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-dNLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise openDoors;&#xD;&#xA;raise allowBoarding&#xD;&#xA;" name="EmergencyStop" incomingTransitions="_M_1-fNLDEe28zv8lYWPWfQ _M_1-edLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-ddLDEe28zv8lYWPWfQ" specification="stopEmergency" target="_M_1-WtLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-dtLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-d9LDEe28zv8lYWPWfQ" specification="" target="_M_1-eNLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:Choice" xmi:id="_M_1-eNLDEe28zv8lYWPWfQ" incomingTransitions="_M_1-d9LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-edLDEe28zv8lYWPWfQ" specification="[currentSpeed == 0.0] " target="_M_1-dNLDEe28zv8lYWPWfQ"/>
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-etLDEe28zv8lYWPWfQ" specification="else" target="_M_1-e9LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_M_1-e9LDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;raise setTargetSpeed: 0;&#xD;&#xA;raise refreshUI " name="OnTheWay" incomingTransitions="_M_1-etLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-fNLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_M_1-dNLDEe28zv8lYWPWfQ"/>
            </vertices>
          </regions>
        </vertices>
      </regions>
    </vertices>
    <vertices xmi:type="sgraph:Entry" xmi:id="_M_1-fdLDEe28zv8lYWPWfQ">
      <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_M_1-ftLDEe28zv8lYWPWfQ" specification="" target="_M_1-ItLDEe28zv8lYWPWfQ"/>
    </vertices>
  </regions>
</sgraph:Statechart>
