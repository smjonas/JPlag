<?xml version="1.0" encoding="UTF-8"?>
<sgraph:Statechart xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:sgraph="http://www.yakindu.org/sct/sgraph/2.0.0" xmi:id="_I6yNQNLDEe2bvqkH140Jvg" specification="// You are only allowed to edit the&#xA;// &quot;internal&quot; section, see below&#xA;&#xA;// DO NOT EDIT THESE OPTIONS&#xA;@EventDriven&#xA;@SuperSteps(no) &#xA;&#xA;interface:&#xA;&#x9;// DO NOT EDIT THE INTERFACE&#xA;&#x9;&#xA;&#x9;in event approachingStation: integer&#xA;&#x9;out event openDoors&#xA;&#x9;out event closeDoors&#xA;&#x9;out event startDoorsSignal&#xA;&#x9;out event stopDoorsSignal&#xA;&#x9;in event board&#xA;&#x9;in event unboard&#xA;&#x9;in event requestStop: integer&#xA;&#x9;out event setTargetSpeed: real&#xA;&#x9;in event atTargetSpeed&#xA;&#x9;&#xA;&#x9;in event startEmergency&#xA;&#x9;in event stopEmergency&#xA;&#xA;&#x9;var stopsAt: integer = 1&#xA;&#x9;var remainingCapacity: integer = 6&#xA;&#x9;var numPassengers: integer = 0&#xA;&#xA;&#x9;out event refreshUI&#xA;&#xA;internal:&#xA;&#x9;// FEEL FREE TO EDIT&#xA;&#x9;// e.g. add internal variables,&#xA;&#x9;//       internal events, ...&#xA;&#x9;var waited2s : boolean = false&#xA;    var currentStation: integer = 0&#xA;    var requestedStop: integer&#xA;    var currentSpeed:integer&#xA;    var noEmergency: boolean = true&#xA;    &#xA;&#x9;event stopBoarding&#xA;&#x9;event startBoarding&#xA;&#x9;event wait1s&#xA;&#x9;event wait1sDone" name="Poe">
  <regions xmi:type="sgraph:Region" xmi:id="_I6yNQdLDEe2bvqkH140Jvg" name="main region">
    <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNQtLDEe2bvqkH140Jvg">
      <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNQ9LDEe2bvqkH140Jvg" specification="" target="_I6yNRNLDEe2bvqkH140Jvg"/>
    </vertices>
    <vertices xmi:type="sgraph:State" xmi:id="_I6yNRNLDEe2bvqkH140Jvg" name="layer1" incomingTransitions="_I6yNQ9LDEe2bvqkH140Jvg">
      <regions xmi:type="sgraph:Region" xmi:id="_I6yNRdLDEe2bvqkH140Jvg" name="Main">
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNRtLDEe2bvqkH140Jvg" name="NormalOperation" incomingTransitions="_I6yNa9LDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNR9LDEe2bvqkH140Jvg" specification="startEmergency/ noEmergency= false; raise stopDoorsSignal" target="_I6yNbNLDEe2bvqkH140Jvg"/>
          <regions xmi:type="sgraph:Region" xmi:id="_I6yNSNLDEe2bvqkH140Jvg" name="NormalOperation">
            <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNSdLDEe2bvqkH140Jvg">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNStLDEe2bvqkH140Jvg" specification="" target="_I6yNTNLDEe2bvqkH140Jvg"/>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNS9LDEe2bvqkH140Jvg" name="ShallowHistory" incomingTransitions="_I6yNb9LDEe2bvqkH140Jvg" kind="SHALLOW_HISTORY"/>
            <vertices xmi:type="sgraph:State" xmi:id="_I6yNTNLDEe2bvqkH140Jvg" name="ArrivalAtStation" incomingTransitions="_I6yNStLDEe2bvqkH140Jvg">
              <regions xmi:type="sgraph:Region" xmi:id="_I6yNTdLDEe2bvqkH140Jvg" name="arrival">
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNTtLDEe2bvqkH140Jvg" specification="entry /&#xD;&#xA;raise refreshUI" name="ArrivalAtStaion" incomingTransitions="_I6yNadLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNT9LDEe2bvqkH140Jvg" specification="after 1 s/ &#xD;&#xA;raise openDoors;&#xD;&#xA;raise refreshUI" target="_I6yNVdLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNUNLDEe2bvqkH140Jvg" name="WaitingForRequest" incomingTransitions="_I6yNVNLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNUdLDEe2bvqkH140Jvg" specification="requestStop [valueof(requestStop) != currentStation]" target="_I6yNWdLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_I6yNUtLDEe2bvqkH140Jvg" incomingTransitions="_I6yNVtLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNU9LDEe2bvqkH140Jvg" specification="[stopsAt > 0]" target="_I6yNWdLDEe2bvqkH140Jvg"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNVNLDEe2bvqkH140Jvg" specification="else" target="_I6yNUNLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNVdLDEe2bvqkH140Jvg" specification="entry/&#xD;&#xA;raise startBoarding;&#xD;&#xA;currentSpeed = 0;&#xD;&#xA;stopsAt &amp;= ~(1 &lt;&lt; currentStation);&#xD;&#xA;raise refreshUI" name="BoardingStart" incomingTransitions="_I6yNT9LDEe2bvqkH140Jvg _I6yNWNLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNVtLDEe2bvqkH140Jvg" specification="after 2 s/ &#xD;&#xA;waited2s = true" target="_I6yNUtLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNV9LDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNWNLDEe2bvqkH140Jvg" specification="" target="_I6yNVdLDEe2bvqkH140Jvg"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_I6yNWdLDEe2bvqkH140Jvg" name="Departure" incomingTransitions="_I6yNU9LDEe2bvqkH140Jvg _I6yNUdLDEe2bvqkH140Jvg">
              <regions xmi:type="sgraph:Region" xmi:id="_I6yNWtLDEe2bvqkH140Jvg" name="D">
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNW9LDEe2bvqkH140Jvg" specification="entry/&#xD;&#xA;raise startDoorsSignal;&#xD;&#xA;raise wait1s;&#xD;&#xA;raise refreshUI" name="StartDeparture" incomingTransitions="_I6yNYNLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNXNLDEe2bvqkH140Jvg" specification="wait1sDone" target="_I6yNXdLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNXdLDEe2bvqkH140Jvg" specification="entry/&#xD;&#xA;raise stopBoarding;&#xD;&#xA;raise stopDoorsSignal;&#xD;&#xA;raise closeDoors;&#xD;&#xA;waited2s = false;&#xD;&#xA;raise refreshUI" name="BoardingStop" incomingTransitions="_I6yNXNLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNXtLDEe2bvqkH140Jvg" specification="after 1 s" target="_I6yNYdLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNX9LDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNYNLDEe2bvqkH140Jvg" specification="" target="_I6yNW9LDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNYdLDEe2bvqkH140Jvg" specification="entry / &#xD;&#xA;raise setTargetSpeed: 24;&#xD;&#xA;currentSpeed = 24;&#xD;&#xA;raise refreshUI" name="StartDriving" incomingTransitions="_I6yNXtLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNYtLDEe2bvqkH140Jvg" specification="atTargetSpeed" target="_I6yNY9LDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNY9LDEe2bvqkH140Jvg" name="FullyAccelerated" incomingTransitions="_I6yNYtLDEe2bvqkH140Jvg _I6yNZ9LDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNZNLDEe2bvqkH140Jvg" specification="approachingStation" target="_I6yNZdLDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_I6yNZdLDEe2bvqkH140Jvg" incomingTransitions="_I6yNZNLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNZtLDEe2bvqkH140Jvg" specification="[&#xD;&#xA;&#x9;(stopsAt &amp; (1 &lt;&lt; valueof(approachingStation))) != 0&#xD;&#xA;]" target="_I6yNaNLDEe2bvqkH140Jvg"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNZ9LDEe2bvqkH140Jvg" specification="else" target="_I6yNY9LDEe2bvqkH140Jvg"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_I6yNaNLDEe2bvqkH140Jvg" specification="entry / &#xD;&#xA;raise setTargetSpeed:0;&#xD;&#xA;raise refreshUI;&#xD;&#xA;currentStation = valueof(approachingStation)" name="ApproachingStation" incomingTransitions="_I6yNZtLDEe2bvqkH140Jvg">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNadLDEe2bvqkH140Jvg" specification="atTargetSpeed / currentSpeed = 0" target="_I6yNTtLDEe2bvqkH140Jvg"/>
                </vertices>
              </regions>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNatLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNa9LDEe2bvqkH140Jvg" specification="" target="_I6yNRtLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNbNLDEe2bvqkH140Jvg" name="Emergency" incomingTransitions="_I6yNR9LDEe2bvqkH140Jvg">
          <regions xmi:type="sgraph:Region" xmi:id="_I6yNbdLDEe2bvqkH140Jvg" name="Emergency">
            <vertices xmi:type="sgraph:State" xmi:id="_I6yNbtLDEe2bvqkH140Jvg" specification="entry/&#xD;&#xA;&#xD;&#xA;raise startBoarding;&#xD;&#xA;raise refreshUI" name="StartEmergencyA" incomingTransitions="_I6yNc9LDEe2bvqkH140Jvg _I6yNdtLDEe2bvqkH140Jvg">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNb9LDEe2bvqkH140Jvg" specification="stopEmergency/ noEmergency=true" target="_I6yNS9LDEe2bvqkH140Jvg"/>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNcNLDEe2bvqkH140Jvg">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNcdLDEe2bvqkH140Jvg" specification="" target="_I6yNctLDEe2bvqkH140Jvg"/>
            </vertices>
            <vertices xmi:type="sgraph:Choice" xmi:id="_I6yNctLDEe2bvqkH140Jvg" incomingTransitions="_I6yNcdLDEe2bvqkH140Jvg">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNc9LDEe2bvqkH140Jvg" specification="[currentSpeed == 0]" target="_I6yNbtLDEe2bvqkH140Jvg"/>
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNdNLDEe2bvqkH140Jvg" specification="else" target="_I6yNddLDEe2bvqkH140Jvg"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_I6yNddLDEe2bvqkH140Jvg" specification="entry/&#xD;&#xA;raise setTargetSpeed: 0;&#xD;&#xA;currentSpeed = 0;&#xD;&#xA;raise refreshUI" name="StartEmergencyB" incomingTransitions="_I6yNdNLDEe2bvqkH140Jvg">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNdtLDEe2bvqkH140Jvg" specification="atTargetSpeed/ raise openDoors" target="_I6yNbtLDEe2bvqkH140Jvg"/>
            </vertices>
          </regions>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_I6yNd9LDEe2bvqkH140Jvg" name="Waiter">
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNeNLDEe2bvqkH140Jvg" name="NoWaiting" incomingTransitions="_I6yNe9LDEe2bvqkH140Jvg _I6yNf9LDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNedLDEe2bvqkH140Jvg" specification="wait1s" target="_I6yNfNLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNetLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNe9LDEe2bvqkH140Jvg" specification="" target="_I6yNeNLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNfNLDEe2bvqkH140Jvg" name="StartWaiting" incomingTransitions="_I6yNedLDEe2bvqkH140Jvg _I6yNgdLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNfdLDEe2bvqkH140Jvg" specification="unboard [numPassengers > 0]" target="_I6yNgNLDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNftLDEe2bvqkH140Jvg" specification="board [remainingCapacity > 0]" target="_I6yNgNLDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNf9LDEe2bvqkH140Jvg" specification="after 1 s [noEmergency == true]/&#xD;&#xA;raise wait1sDone" target="_I6yNeNLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNgNLDEe2bvqkH140Jvg" name="ResetWaiting" incomingTransitions="_I6yNfdLDEe2bvqkH140Jvg _I6yNftLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNgdLDEe2bvqkH140Jvg" specification="wait1s" target="_I6yNfNLDEe2bvqkH140Jvg"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_I6yNgtLDEe2bvqkH140Jvg" name="Boarding">
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNg9LDEe2bvqkH140Jvg" specification="entry / &#xD;&#xA;raise refreshUI" name="NoBoarding" incomingTransitions="_I6yNitLDEe2bvqkH140Jvg _I6yNiNLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNhNLDEe2bvqkH140Jvg" specification="startBoarding" target="_I6yNhdLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNhdLDEe2bvqkH140Jvg" specification="" name="Boarding" incomingTransitions="_I6yNhNLDEe2bvqkH140Jvg _I6yNkNLDEe2bvqkH140Jvg _I6yNkdLDEe2bvqkH140Jvg _I6yNk9LDEe2bvqkH140Jvg _I6yNlNLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNhtLDEe2bvqkH140Jvg" specification="board [remainingCapacity > 0]" target="_I6yNi9LDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNh9LDEe2bvqkH140Jvg" specification="unboard [numPassengers > 0]" target="_I6yNjdLDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNiNLDEe2bvqkH140Jvg" specification="wait1sDone" target="_I6yNg9LDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNidLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNitLDEe2bvqkH140Jvg" specification="" target="_I6yNg9LDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNi9LDEe2bvqkH140Jvg" specification="entry /&#xD;&#xA;numPassengers +=1;&#xD;&#xA;remainingCapacity= 6 - numPassengers;&#xD;&#xA;raise refreshUI" name="Board" incomingTransitions="_I6yNhtLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNjNLDEe2bvqkH140Jvg" specification="after 1 s" target="_I6yNj9LDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNjdLDEe2bvqkH140Jvg" specification="entry /&#xD;&#xA;numPassengers -=1;&#xD;&#xA;remainingCapacity= 6 - numPassengers;&#xD;&#xA;raise refreshUI" name="Unboard" incomingTransitions="_I6yNh9LDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNjtLDEe2bvqkH140Jvg" specification="after 1 s" target="_I6yNktLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:Choice" xmi:id="_I6yNj9LDEe2bvqkH140Jvg" incomingTransitions="_I6yNjNLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNkNLDEe2bvqkH140Jvg" specification="[stopsAt > 0 &amp;&amp; noEmergency == true]/ raise wait1s" target="_I6yNhdLDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNkdLDEe2bvqkH140Jvg" specification="else" target="_I6yNhdLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:Choice" xmi:id="_I6yNktLDEe2bvqkH140Jvg" incomingTransitions="_I6yNjtLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNk9LDEe2bvqkH140Jvg" specification="else" target="_I6yNhdLDEe2bvqkH140Jvg"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNlNLDEe2bvqkH140Jvg" specification="[stopsAt > 0 &amp;&amp; noEmergency== true]/ raise wait1s" target="_I6yNhdLDEe2bvqkH140Jvg"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_I6yNldLDEe2bvqkH140Jvg" name="StopRequests">
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNltLDEe2bvqkH140Jvg" name="NoRequests" incomingTransitions="_I6yNmdLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNl9LDEe2bvqkH140Jvg" specification="requestStop [valueof(requestStop) != currentStation]" target="_I6yNmtLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_I6yNmNLDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNmdLDEe2bvqkH140Jvg" target="_I6yNltLDEe2bvqkH140Jvg"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_I6yNmtLDEe2bvqkH140Jvg" specification="entry / &#xD;&#xA;requestedStop = valueof(requestStop);&#xD;&#xA;stopsAt |= (1 &lt;&lt; requestedStop);&#xD;&#xA;raise refreshUI" name="StopRequest" incomingTransitions="_I6yNm9LDEe2bvqkH140Jvg _I6yNl9LDEe2bvqkH140Jvg">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_I6yNm9LDEe2bvqkH140Jvg" specification="requestStop [valueof(requestStop) != currentStation]" target="_I6yNmtLDEe2bvqkH140Jvg"/>
        </vertices>
      </regions>
    </vertices>
  </regions>
</sgraph:Statechart>
