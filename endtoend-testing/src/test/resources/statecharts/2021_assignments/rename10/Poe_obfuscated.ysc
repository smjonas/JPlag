<?xml version="1.0" encoding="UTF-8"?>
<sgraph:Statechart xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:sgraph="http://www.yakindu.org/sct/sgraph/2.0.0" xmi:id="_NAVtYNLDEe28zv8lYWPWfQ" specification="// You are only allowed to edit the&#xA;// &quot;internal&quot; section, see below&#xA;&#xA;// DO NOT EDIT THESE OPTIONS&#xA;@EventDriven&#xA;@SuperSteps(no) &#xA;&#xA;interface:&#xA;&#x9;// DO NOT EDIT THE INTERFACE&#xA;&#x9;&#xA;&#x9;in event approachingStation: integer&#xA;&#x9;out event openDoors&#xA;&#x9;out event closeDoors&#xA;&#x9;out event startDoorsSignal&#xA;&#x9;out event stopDoorsSignal&#xA;&#x9;in event board&#xA;&#x9;in event unboard&#xA;&#x9;in event requestStop: integer&#xA;&#x9;out event setTargetSpeed: real&#xA;&#x9;in event atTargetSpeed&#xA;&#x9;&#xA;&#x9;in event startEmergency&#xA;&#x9;in event stopEmergency&#xA;&#xA;&#x9;var stopsAt: integer = 1&#xA;&#x9;var remainingCapacity: integer = 6&#xA;&#x9;var numPassengers: integer = 0&#xA;&#xA;&#x9;out event refreshUI&#xA;&#xA;internal:&#xA;&#x9;// FEEL FREE TO EDIT&#xA;&#x9;// e.g. add internal variables,&#xA;&#x9;//       internal events, ...&#xA;&#x9;var waited2s : boolean = false&#xA;    var currentStation: integer = 0&#xA;    var requestedStop: integer&#xA;    var currentSpeed:integer&#xA;    var noEmergency: boolean = true&#xA;    &#xA;&#x9;event stopBoarding&#xA;&#x9;event startBoarding&#xA;&#x9;event wait1s&#xA;&#x9;event wait1sDone" name="Poe">
  <regions xmi:type="sgraph:Region" xmi:id="_NAVtYdLDEe28zv8lYWPWfQ" name="main region">
    <vertices xmi:type="sgraph:State" xmi:id="_NAVtYtLDEe28zv8lYWPWfQ" name="layer1" incomingTransitions="_NAVtu9LDEe28zv8lYWPWfQ">
      <regions xmi:type="sgraph:Region" xmi:id="_NAVtY9LDEe28zv8lYWPWfQ" name="Main">
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtZNLDEe28zv8lYWPWfQ" name="NormalOperation" incomingTransitions="_NAVtidLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtZdLDEe28zv8lYWPWfQ" specification="startEmergency/ noEmergency= false; raise stopDoorsSignal" target="_NAVtitLDEe28zv8lYWPWfQ"/>
          <regions xmi:type="sgraph:Region" xmi:id="_NAVtZtLDEe28zv8lYWPWfQ" name="qdJTeg47ZQ">
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtZ9LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtaNLDEe28zv8lYWPWfQ" specification="" target="_NAVte9LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAVtadLDEe28zv8lYWPWfQ" name="Departure" incomingTransitions="_NAVthNLDEe28zv8lYWPWfQ _NAVtgNLDEe28zv8lYWPWfQ">
              <regions xmi:type="sgraph:Region" xmi:id="_NAVtatLDEe28zv8lYWPWfQ" name="D">
                <vertices xmi:type="sgraph:State" xmi:id="_NAVta9LDEe28zv8lYWPWfQ" specification="entry/&#xD;&#xA;raise startDoorsSignal;&#xD;&#xA;raise wait1s;&#xD;&#xA;raise refreshUI" name="StartDeparture" incomingTransitions="_NAVtedLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtbNLDEe28zv8lYWPWfQ" specification="wait1sDone" target="_NAVtbdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtbdLDEe28zv8lYWPWfQ" specification="entry/&#xD;&#xA;raise stopBoarding;&#xD;&#xA;raise stopDoorsSignal;&#xD;&#xA;raise closeDoors;&#xD;&#xA;waited2s = false;&#xD;&#xA;raise refreshUI" name="BoardingStop" incomingTransitions="_NAVtbNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtbtLDEe28zv8lYWPWfQ" specification="after 1 s" target="_NAVtb9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtb9LDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise setTargetSpeed: 24;&#xD;&#xA;currentSpeed = 24;&#xD;&#xA;raise refreshUI" name="StartDriving" incomingTransitions="_NAVtbtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtcNLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_NAVtcdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtcdLDEe28zv8lYWPWfQ" name="YiLsHOj3wk" incomingTransitions="_NAVtcNLDEe28zv8lYWPWfQ _NAVtddLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtctLDEe28zv8lYWPWfQ" specification="approachingStation" target="_NAVtc9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_NAVtc9LDEe28zv8lYWPWfQ" incomingTransitions="_NAVtctLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtdNLDEe28zv8lYWPWfQ" specification="[&#xD;&#xA;&#x9;(stopsAt &amp; (1 &lt;&lt; valueof(approachingStation))) != 0&#xD;&#xA;]" target="_NAVtdtLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtddLDEe28zv8lYWPWfQ" specification="else" target="_NAVtcdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtdtLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise setTargetSpeed:0;&#xD;&#xA;raise refreshUI;&#xD;&#xA;currentStation = valueof(approachingStation)" name="ApproachingStation" incomingTransitions="_NAVtdNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtd9LDEe28zv8lYWPWfQ" specification="atTargetSpeed / currentSpeed = 0" target="_NAVtfdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_NAVteNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtedLDEe28zv8lYWPWfQ" specification="" target="_NAVta9LDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtetLDEe28zv8lYWPWfQ" name="ShallowHistory" incomingTransitions="_NAVtjdLDEe28zv8lYWPWfQ" kind="SHALLOW_HISTORY"/>
            <vertices xmi:type="sgraph:State" xmi:id="_NAVte9LDEe28zv8lYWPWfQ" name="ArrivalAtStation" incomingTransitions="_NAVtaNLDEe28zv8lYWPWfQ">
              <regions xmi:type="sgraph:Region" xmi:id="_NAVtfNLDEe28zv8lYWPWfQ" name="mzzYYXIxGX">
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtfdLDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;raise refreshUI" name="ArrivalAtStaion" incomingTransitions="_NAVtd9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtftLDEe28zv8lYWPWfQ" specification="after 1 s/ &#xD;&#xA;raise openDoors;&#xD;&#xA;raise refreshUI" target="_NAVtgdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtf9LDEe28zv8lYWPWfQ" name="WaitingForRequest" incomingTransitions="_NAVthdLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtgNLDEe28zv8lYWPWfQ" specification="requestStop [valueof(requestStop) != currentStation]" target="_NAVtadLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAVtgdLDEe28zv8lYWPWfQ" specification="entry/&#xD;&#xA;raise startBoarding;&#xD;&#xA;currentSpeed = 0;&#xD;&#xA;stopsAt &amp;= ~(1 &lt;&lt; currentStation);&#xD;&#xA;raise refreshUI" name="BoardingStart" incomingTransitions="_NAVtftLDEe28zv8lYWPWfQ _NAVth9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtgtLDEe28zv8lYWPWfQ" specification="after 2 s/ &#xD;&#xA;waited2s = true" target="_NAVtg9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_NAVtg9LDEe28zv8lYWPWfQ" incomingTransitions="_NAVtgtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVthNLDEe28zv8lYWPWfQ" specification="[stopsAt > 0]" target="_NAVtadLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVthdLDEe28zv8lYWPWfQ" specification="else" target="_NAVtf9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_NAVthtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVth9LDEe28zv8lYWPWfQ" specification="" target="_NAVtgdLDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtiNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtidLDEe28zv8lYWPWfQ" specification="" target="_NAVtZNLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtitLDEe28zv8lYWPWfQ" name="Emergency" incomingTransitions="_NAVtZdLDEe28zv8lYWPWfQ">
          <regions xmi:type="sgraph:Region" xmi:id="_NAVti9LDEe28zv8lYWPWfQ" name="PdlBaQKSnD">
            <vertices xmi:type="sgraph:State" xmi:id="_NAVtjNLDEe28zv8lYWPWfQ" specification="entry/&#xD;&#xA;&#xD;&#xA;raise startBoarding;&#xD;&#xA;raise refreshUI" name="StartEmergencyA" incomingTransitions="_NAVtkdLDEe28zv8lYWPWfQ _NAVtlNLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtjdLDEe28zv8lYWPWfQ" specification="stopEmergency/ noEmergency=true" target="_NAVtetLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtjtLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtj9LDEe28zv8lYWPWfQ" specification="" target="_NAVtkNLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:Choice" xmi:id="_NAVtkNLDEe28zv8lYWPWfQ" incomingTransitions="_NAVtj9LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtkdLDEe28zv8lYWPWfQ" specification="[currentSpeed == 0]" target="_NAVtjNLDEe28zv8lYWPWfQ"/>
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtktLDEe28zv8lYWPWfQ" specification="else" target="_NAVtk9LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAVtk9LDEe28zv8lYWPWfQ" specification="entry/&#xD;&#xA;raise setTargetSpeed: 0;&#xD;&#xA;currentSpeed = 0;&#xD;&#xA;raise refreshUI" name="g5x7IqOPml" incomingTransitions="_NAVtktLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtlNLDEe28zv8lYWPWfQ" specification="atTargetSpeed/ raise openDoors" target="_NAVtjNLDEe28zv8lYWPWfQ"/>
            </vertices>
          </regions>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_NAVtldLDEe28zv8lYWPWfQ" name="cdl5HlMVLp">
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtltLDEe28zv8lYWPWfQ" name="NoWaiting" incomingTransitions="_NAVtmdLDEe28zv8lYWPWfQ _NAVtm9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtl9LDEe28zv8lYWPWfQ" specification="wait1s" target="_NAVtmtLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtmNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtmdLDEe28zv8lYWPWfQ" specification="" target="_NAVtltLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtmtLDEe28zv8lYWPWfQ" name="StartWaiting" incomingTransitions="_NAVtl9LDEe28zv8lYWPWfQ _NAVtn9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtm9LDEe28zv8lYWPWfQ" specification="after 1 s [noEmergency == true]/&#xD;&#xA;raise wait1sDone" target="_NAVtltLDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtnNLDEe28zv8lYWPWfQ" specification="unboard [numPassengers > 0]" target="_NAVtntLDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtndLDEe28zv8lYWPWfQ" specification="board [remainingCapacity > 0]" target="_NAVtntLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtntLDEe28zv8lYWPWfQ" name="EvnxDdpP3t" incomingTransitions="_NAVtnNLDEe28zv8lYWPWfQ _NAVtndLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtn9LDEe28zv8lYWPWfQ" specification="wait1s" target="_NAVtmtLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_NAVtoNLDEe28zv8lYWPWfQ" name="Boarding">
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtodLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;raise refreshUI" name="NoBoarding" incomingTransitions="_NAVtqNLDEe28zv8lYWPWfQ _NAVtptLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtotLDEe28zv8lYWPWfQ" specification="startBoarding" target="_NAVto9LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVto9LDEe28zv8lYWPWfQ" specification="" name="Boarding" incomingTransitions="_NAVtotLDEe28zv8lYWPWfQ _NAVtrtLDEe28zv8lYWPWfQ _NAVtr9LDEe28zv8lYWPWfQ _NAVtsdLDEe28zv8lYWPWfQ _NAVtstLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtpNLDEe28zv8lYWPWfQ" specification="board [remainingCapacity > 0]" target="_NAVtqdLDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtpdLDEe28zv8lYWPWfQ" specification="unboard [numPassengers > 0]" target="_NAVtq9LDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtptLDEe28zv8lYWPWfQ" specification="wait1sDone" target="_NAVtodLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtp9LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtqNLDEe28zv8lYWPWfQ" specification="" target="_NAVtodLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtqdLDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;numPassengers +=1;&#xD;&#xA;remainingCapacity= 6 - numPassengers;&#xD;&#xA;raise refreshUI" name="Board" incomingTransitions="_NAVtpNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtqtLDEe28zv8lYWPWfQ" specification="after 1 s" target="_NAVtrdLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtq9LDEe28zv8lYWPWfQ" specification="entry /&#xD;&#xA;numPassengers -=1;&#xD;&#xA;remainingCapacity= 6 - numPassengers;&#xD;&#xA;raise refreshUI" name="Unboard" incomingTransitions="_NAVtpdLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtrNLDEe28zv8lYWPWfQ" specification="after 1 s" target="_NAVtsNLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Choice" xmi:id="_NAVtrdLDEe28zv8lYWPWfQ" incomingTransitions="_NAVtqtLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtrtLDEe28zv8lYWPWfQ" specification="[stopsAt > 0 &amp;&amp; noEmergency == true]/ raise wait1s" target="_NAVto9LDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtr9LDEe28zv8lYWPWfQ" specification="else" target="_NAVto9LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Choice" xmi:id="_NAVtsNLDEe28zv8lYWPWfQ" incomingTransitions="_NAVtrNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtsdLDEe28zv8lYWPWfQ" specification="else" target="_NAVto9LDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtstLDEe28zv8lYWPWfQ" specification="[stopsAt > 0 &amp;&amp; noEmergency== true]/ raise wait1s" target="_NAVto9LDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_NAVts9LDEe28zv8lYWPWfQ" name="StopRequests">
        <vertices xmi:type="sgraph:State" xmi:id="_NAVttNLDEe28zv8lYWPWfQ" name="NoRequests" incomingTransitions="_NAVtudLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVttdLDEe28zv8lYWPWfQ" specification="requestStop [valueof(requestStop) != currentStation]" target="_NAVtttLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAVtttLDEe28zv8lYWPWfQ" specification="entry / &#xD;&#xA;requestedStop = valueof(requestStop);&#xD;&#xA;stopsAt |= (1 &lt;&lt; requestedStop);&#xD;&#xA;raise refreshUI" name="StopRequest" incomingTransitions="_NAVtt9LDEe28zv8lYWPWfQ _NAVttdLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtt9LDEe28zv8lYWPWfQ" specification="requestStop [valueof(requestStop) != currentStation]" target="_NAVtttLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtuNLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtudLDEe28zv8lYWPWfQ" target="_NAVttNLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
    </vertices>
    <vertices xmi:type="sgraph:Entry" xmi:id="_NAVtutLDEe28zv8lYWPWfQ">
      <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAVtu9LDEe28zv8lYWPWfQ" specification="" target="_NAVtYtLDEe28zv8lYWPWfQ"/>
    </vertices>
  </regions>
</sgraph:Statechart>
