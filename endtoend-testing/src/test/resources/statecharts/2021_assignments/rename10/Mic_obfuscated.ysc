<?xml version="1.0" encoding="UTF-8"?>
<sgraph:Statechart xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:sgraph="http://www.yakindu.org/sct/sgraph/2.0.0" xmi:id="_NAOYoNLDEe28zv8lYWPWfQ" specification="// You are only allowed to edit the&#xA;// &quot;internal&quot; section, see below&#xA;&#xA;// DO NOT EDIT THESE OPTIONS&#xA;@EventDriven&#xA;@SuperSteps(no) &#xA;&#xA;interface:&#xA;&#x9;// DO NOT EDIT THE INTERFACE&#xA;&#x9;&#xA;&#x9;in event approachingStation: integer&#xA;&#x9;out event openDoors&#xA;&#x9;out event closeDoors&#xA;&#x9;out event startDoorsSignal&#xA;&#x9;out event stopDoorsSignal&#xA;&#x9;in event board&#xA;&#x9;in event unboard&#xA;&#x9;in event requestStop: integer&#xA;&#x9;out event setTargetSpeed: real&#xA;&#x9;in event atTargetSpeed&#xA;&#x9;&#xA;&#x9;in event startEmergency&#xA;&#x9;in event stopEmergency&#xA;&#xA;&#x9;var stopsAt: integer = 0&#xA;&#x9;var remainingCapacity: integer = 6&#xA;&#x9;var numPassengers: integer = 0&#xA;&#xA;&#x9;out event refreshUI&#xA;&#xA;internal:&#xA;&#x9;// FEEL FREE TO EDIT&#xA;&#x9;// e.g. add internal variables,&#xA;&#x9;//       internal events, ...&#xA;&#x9;&#xA;&#x9;var current_station: integer = 0&#xA;&#x9;var moving: boolean = false&#xA;&#x9;event openDoorsInternal&#xA;&#x9;event closeDoorsInternal&#xA;&#x9;event obstructed&#xA;&#x9;&#xA;&#x9;" name="Mic">
  <regions xmi:type="sgraph:Region" xmi:id="_NAOYodLDEe28zv8lYWPWfQ" name="jmWrJGumMW">
    <vertices xmi:type="sgraph:State" xmi:id="_NAOYotLDEe28zv8lYWPWfQ" name="NlN7wgY5Jn" incomingTransitions="_NAOY69LDEe28zv8lYWPWfQ">
      <regions xmi:type="sgraph:Region" xmi:id="_NAOYo9LDEe28zv8lYWPWfQ" name="r1">
        <vertices xmi:type="sgraph:State" xmi:id="_NAOYpNLDEe28zv8lYWPWfQ" name="Normal_operation" incomingTransitions="_NAOY1dLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYpdLDEe28zv8lYWPWfQ" specification="startEmergency" target="_NAOY0dLDEe28zv8lYWPWfQ"/>
          <regions xmi:type="sgraph:Region" xmi:id="_NAOYptLDEe28zv8lYWPWfQ" name="r1">
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAOYp9LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYqNLDEe28zv8lYWPWfQ" specification="" target="_NAOYvdLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAOYqdLDEe28zv8lYWPWfQ" name="Departure_at_a_station">
              <regions xmi:type="sgraph:Region" xmi:id="_NAOYqtLDEe28zv8lYWPWfQ" name="V5FFwDqkTa">
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYq9LDEe28zv8lYWPWfQ" specification="entry / raise startDoorsSignal; current_station = -1" name="hXnaAztHDK" incomingTransitions="_NAOYxtLDEe28zv8lYWPWfQ _NAOYxNLDEe28zv8lYWPWfQ _NAOYvNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYrNLDEe28zv8lYWPWfQ" specification="obstructed" target="_NAOYrtLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYrdLDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOYs9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYrtLDEe28zv8lYWPWfQ" name="RDsc77U2cj" incomingTransitions="_NAOYrNLDEe28zv8lYWPWfQ _NAOYsdLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYr9LDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOYsNLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYsNLDEe28zv8lYWPWfQ" specification="" name="closing_door_procedure2" incomingTransitions="_NAOYr9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYsdLDEe28zv8lYWPWfQ" specification="obstructed" target="_NAOYrtLDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYstLDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOYs9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYs9LDEe28zv8lYWPWfQ" specification="entry / raise closeDoors; raise stopDoorsSignal; raise closeDoorsInternal" name="closing door" incomingTransitions="_NAOYrdLDEe28zv8lYWPWfQ _NAOYstLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYtNLDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOYtdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYtdLDEe28zv8lYWPWfQ" specification="entry / raise setTargetSpeed: 24; moving = true" name="accelerate" incomingTransitions="_NAOYtNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYttLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_NAOYt9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYt9LDEe28zv8lYWPWfQ" name="travelling to station" incomingTransitions="_NAOYttLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYuNLDEe28zv8lYWPWfQ" specification="approachingStation [(stopsAt &amp; (1 &lt;&lt; valueof(approachingStation))) != 0]  / current_station = valueof(approachingStation)" target="_NAOYudLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYudLDEe28zv8lYWPWfQ" specification="entry / raise setTargetSpeed: 0" name="braking" incomingTransitions="_NAOYuNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYutLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_NAOYv9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_NAOYu9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYvNLDEe28zv8lYWPWfQ" specification="" target="_NAOYq9LDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAOYvdLDEe28zv8lYWPWfQ" name="Sd594IRUS7" incomingTransitions="_NAOYqNLDEe28zv8lYWPWfQ">
              <regions xmi:type="sgraph:Region" xmi:id="_NAOYvtLDEe28zv8lYWPWfQ" name="r1">
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYv9LDEe28zv8lYWPWfQ" specification="entry /  stopsAt &amp;= ~(1&lt;&lt;current_station); raise refreshUI; moving = false" name="Wait 1s" incomingTransitions="_NAOYutLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYwNLDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOYwdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYwdLDEe28zv8lYWPWfQ" specification="entry / raise openDoors; raise openDoorsInternal" name="Doors open" incomingTransitions="_NAOYwNLDEe28zv8lYWPWfQ _NAOYydLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYwtLDEe28zv8lYWPWfQ" specification="after 2s" target="_NAOYxdLDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:State" xmi:id="_NAOYw9LDEe28zv8lYWPWfQ" name="waiting for request" incomingTransitions="_NAOYx9LDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYxNLDEe28zv8lYWPWfQ" specification="requestStop [valueof(requestStop) != current_station]" target="_NAOYq9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Choice" xmi:id="_NAOYxdLDEe28zv8lYWPWfQ" incomingTransitions="_NAOYwtLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYxtLDEe28zv8lYWPWfQ" specification="[stopsAt != 0]" target="_NAOYq9LDEe28zv8lYWPWfQ"/>
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYx9LDEe28zv8lYWPWfQ" specification="else" target="_NAOYw9LDEe28zv8lYWPWfQ"/>
                </vertices>
                <vertices xmi:type="sgraph:Entry" xmi:id="_NAOYyNLDEe28zv8lYWPWfQ">
                  <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYydLDEe28zv8lYWPWfQ" specification="" target="_NAOYwdLDEe28zv8lYWPWfQ"/>
                </vertices>
              </regions>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAOYytLDEe28zv8lYWPWfQ" name="IdmXQQVIgm" incomingTransitions="_NAOY0NLDEe28zv8lYWPWfQ" kind="SHALLOW_HISTORY"/>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAOYy9LDEe28zv8lYWPWfQ" name="emergency">
          <regions xmi:type="sgraph:Region" xmi:id="_NAOYzNLDEe28zv8lYWPWfQ" name="ox8JK9PbOv">
            <vertices xmi:type="sgraph:State" xmi:id="_NAOYzdLDEe28zv8lYWPWfQ" specification="entry / raise setTargetSpeed: 0" name="braking" incomingTransitions="_NAOY0tLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOYztLDEe28zv8lYWPWfQ" specification="atTargetSpeed" target="_NAOYz9LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAOYz9LDEe28zv8lYWPWfQ" specification="entry / raise openDoors; raise openDoorsInternal" name="qtFEEmkjrp" incomingTransitions="_NAOYztLDEe28zv8lYWPWfQ _NAOY09LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY0NLDEe28zv8lYWPWfQ" specification="stopEmergency" target="_NAOYytLDEe28zv8lYWPWfQ"/>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:Choice" xmi:id="_NAOY0dLDEe28zv8lYWPWfQ" incomingTransitions="_NAOYpdLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY0tLDEe28zv8lYWPWfQ" specification="[moving]" target="_NAOYzdLDEe28zv8lYWPWfQ"/>
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY09LDEe28zv8lYWPWfQ" specification="else" target="_NAOYz9LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAOY1NLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY1dLDEe28zv8lYWPWfQ" specification="" target="_NAOYpNLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_NAOY1tLDEe28zv8lYWPWfQ" name="r3">
        <vertices xmi:type="sgraph:State" xmi:id="_NAOY19LDEe28zv8lYWPWfQ" name="zF9MIF51pO" incomingTransitions="_NAOY2NLDEe28zv8lYWPWfQ _NAOY2tLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY2NLDEe28zv8lYWPWfQ" specification="requestStop [valueof(requestStop) != current_station] /  stopsAt |= (1&lt;&lt;valueof(requestStop)); raise refreshUI" target="_NAOY19LDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAOY2dLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY2tLDEe28zv8lYWPWfQ" specification="" target="_NAOY19LDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
      <regions xmi:type="sgraph:Region" xmi:id="_NAOY29LDEe28zv8lYWPWfQ" name="r2">
        <vertices xmi:type="sgraph:State" xmi:id="_NAOY3NLDEe28zv8lYWPWfQ" name="Open Doors " incomingTransitions="_NAOY59LDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY3dLDEe28zv8lYWPWfQ" specification="closeDoorsInternal" target="_NAOY5tLDEe28zv8lYWPWfQ"/>
          <regions xmi:type="sgraph:Region" xmi:id="_NAOY3tLDEe28zv8lYWPWfQ" name="r1">
            <vertices xmi:type="sgraph:State" xmi:id="_NAOY39LDEe28zv8lYWPWfQ" specification="entry / raise obstructed; raise refreshUI" name="Obstructed" incomingTransitions="_NAOY4tLDEe28zv8lYWPWfQ _NAOY49LDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY4NLDEe28zv8lYWPWfQ" specification="after 1s" target="_NAOY4dLDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:State" xmi:id="_NAOY4dLDEe28zv8lYWPWfQ" name="UnObstructed" incomingTransitions="_NAOY5dLDEe28zv8lYWPWfQ _NAOY4NLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY4tLDEe28zv8lYWPWfQ" specification="board [remainingCapacity > 0] / remainingCapacity -= 1; numPassengers += 1 " target="_NAOY39LDEe28zv8lYWPWfQ"/>
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY49LDEe28zv8lYWPWfQ" specification="unboard [numPassengers > 0] / remainingCapacity += 1; numPassengers -= 1 " target="_NAOY39LDEe28zv8lYWPWfQ"/>
            </vertices>
            <vertices xmi:type="sgraph:Entry" xmi:id="_NAOY5NLDEe28zv8lYWPWfQ">
              <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY5dLDEe28zv8lYWPWfQ" specification="" target="_NAOY4dLDEe28zv8lYWPWfQ"/>
            </vertices>
          </regions>
        </vertices>
        <vertices xmi:type="sgraph:State" xmi:id="_NAOY5tLDEe28zv8lYWPWfQ" name="Closed doors" incomingTransitions="_NAOY6dLDEe28zv8lYWPWfQ _NAOY3dLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY59LDEe28zv8lYWPWfQ" specification="openDoorsInternal" target="_NAOY3NLDEe28zv8lYWPWfQ"/>
        </vertices>
        <vertices xmi:type="sgraph:Entry" xmi:id="_NAOY6NLDEe28zv8lYWPWfQ">
          <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY6dLDEe28zv8lYWPWfQ" specification="" target="_NAOY5tLDEe28zv8lYWPWfQ"/>
        </vertices>
      </regions>
    </vertices>
    <vertices xmi:type="sgraph:Entry" xmi:id="_NAOY6tLDEe28zv8lYWPWfQ">
      <outgoingTransitions xmi:type="sgraph:Transition" xmi:id="_NAOY69LDEe28zv8lYWPWfQ" specification="" target="_NAOYotLDEe28zv8lYWPWfQ"/>
    </vertices>
  </regions>
</sgraph:Statechart>
